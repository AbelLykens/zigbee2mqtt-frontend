!function(e){function t(t){for(var o,s,u=t[0],a=t[1],l=t[2],p=0,f=[];p<u.length;p++)s=u[p],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&f.push(r[s][0]),r[s]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o]);for(c&&c(t);f.length;)f.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,u=1;u<n.length;u++){var a=n[u];0!==r[a]&&(o=!1)}o&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},r={0:0},i=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var u=window.webpackJsonp=window.webpackJsonp||[],a=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var c=a;i.push([27,1]),n()}([,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.EndDevice="EndDevice",e.Router="Router",e.Coordinator="Coordinator"}(t.DeviceType||(t.DeviceType={}))},,function(e,t,n){var o=n(21),r=n(31);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1},s=(o(r,i),r.locals?r.locals:{});e.exports=s},,,,,,,,,,function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),u=n(45),a=n(47),l=n(5),c=n(11),p=n(18),f=n(13),d=i({},f);t.isOnline=function(e,t){return!t||!e.last_seen||t.ts-parseInt(e.last_seen,10)<7200};var h=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.ref=s.createRef(),t.onMouseOut=function(){var e=t.props,n=e.node,o=e.onMouseOut;o&&o(n)},t.onMouseOver=function(){var e=t.props,n=e.node,o=e.onMouseOver;o&&o(n)},t.onDblClick=function(){var e=t.props,n=e.node,o=e.onDblClick;o&&o(n)},t}return r(n,e),n.prototype.componentDidMount=function(){var e=this.ref.current,t=this.props.node;l.select(e).data([t])},n.prototype.render=function(){var e,n,o,r=this.props,i=r.node,a=r.time,l=this.onMouseOver,h=this.onMouseOut,v=this.onDblClick,y=i.device.type,_=d[y],b=p.default(f.node,_,((e={})[d.offline]=!t.isOnline(i.device,a),e));switch(i.device.type){case c.DeviceType.Coordinator:return s.h("path",{className:b,ref:this.ref,d:(n=14,o=5,u.lineRadial()([[0,n],[.2*Math.PI,o],[.4*Math.PI,n],[.6*Math.PI,o],[.8*Math.PI,n],[1*Math.PI,o],[1.2*Math.PI,n],[1.4*Math.PI,o],[1.6*Math.PI,n],[1.8*Math.PI,o],[2*Math.PI,n]])),onMouseOver:l,onMouseOut:h,onDblClick:v});default:return s.h("circle",{onMouseOver:l,onMouseOut:h,onDblClick:v,className:b,ref:this.ref,r:5})}},n}(s.Component),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.updateDrag=function(){var e=this.props.simulation,t=a.drag().on("start",(function(t){l.event.active||e.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y})).on("drag",(function(e){e.fx=l.event.x,e.fy=l.event.y})).on("end",(function(t){l.event.active||e.alphaTarget(0),t.fx=void 0,t.fy=void 0}));l.selectAll("."+f.node).call(t)},t.prototype.componentDidMount=function(){this.updateDrag()},t.prototype.componentDidUpdate=function(){this.updateDrag()},t.prototype.render=function(){var e=this.props,t=e.nodes,n=e.onMouseOut,o=e.onMouseOver,r=e.onDblClick,i=e.time;return s.h("g",{className:f.nodes},t.map((function(e,t){return s.h(h,{time:i,onMouseOut:n,onMouseOver:o,onDblClick:r,key:t,node:e})})))},t}(s.Component);t.default=v},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(28),r=n(29);o.default(r.default).render({selector:'[data-widget-host="map"]',clean:!0})},,function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),s=n(30),u=n(23),a=n(32),l=n(46),c=n(5),p=n(13),f=n(11),d=n(33),h=n(40),v=n(42),y=function(e){switch(e.type){case"Router2Router":case"Router2Coordinator":return 200;case"EndDevice2Coordinator":case"EndDevice2Router":return 100;default:return 150}},_=function(e){function t(){var t=e.call(this)||this;return t.ref=i.createRef(),t.setTooltip=function(e){t.setState({tooltipNode:e})},t.removeTooltip=function(){t.setState({tooltipNode:!1})},t.openDetailsWindow=function(e){switch(e.device.type){case f.DeviceType.EndDevice:case f.DeviceType.Router:window.open("/zigbee?nwkAddr=0x"+parseInt(e.id,10).toString(16),"_blank")}},t.state={width:0,height:0,graph:{nodes:[],links:[]},tooltipNode:!1,time:void 0},t.simulation=l.forceSimulation(),t}return r(t,e),t.prototype.updateNodes=function(){this.updateForces();var e=c.selectAll("."+p.node),t=c.selectAll("."+p.link),n=c.selectAll("."+p.linkLabel),o=c.selectAll("."+p.label),r=function(e){return"M "+e.source.x+" "+e.source.y+" L "+e.target.x+" "+e.target.y},i=this.state.graph;this.simulation.nodes(i.nodes).on("tick",(function(){t.attr("d",r),n.attr("transform",(function(e){if(e.target.x<e.source.x){var t=this.getBBox();return"rotate(180 "+(t.x+t.width/2)+" "+(t.y+t.height/2)+")"}return"rotate(0)"})),e.attr("transform",(function(e){return"translate("+e.x+", "+e.y+")"})),o.attr("x",(function(e){return e.x+5})).attr("y",(function(e){return e.y+5}))})),this.simulation.force("link").links(i.links),this.simulation.restart()},t.prototype.updateForces=function(){var e=this.state,t=e.width,n=e.height,o=l.forceLink().id((function(e){return e.id})).distance(y).strength(1),r=l.forceManyBody().distanceMin(200).distanceMax(1e3).strength(-200);this.simulation.force("link",o).force("charge",r).force("center",l.forceCenter(t/2,n/2)),t<400&&this.simulation.force("x",l.forceX(t/2).strength(.1)).force("y",l.forceY(n/2).strength(.1))},t.prototype.componentDidMount=function(){var e,t=this;e=function(e,n){t.setState({time:n.body})},d.get("/api/time").responseType("json").end(e),function(e){d.get("/api/zigbee/devices").responseType("json").end(e)}((function(e,n){var o=t.ref.current.getBoundingClientRect(),r=o.width,i=o.height,s=h.convert2graph(n.body);t.setState({graph:s,width:r,height:i},t.updateNodes)}))},t.prototype.render=function(){var e=this.state,t=e.width,n=e.height,o=e.time,r=this.state,l=r.graph,c=r.tooltipNode,f=this.setTooltip,d=this.removeTooltip,h=this.openDetailsWindow;return i.h("div",{className:p.container,ref:this.ref},i.h("svg",{viewBox:"0 0 "+t+" "+n},i.h(s.default,{links:l.links}),i.h(u.default,{nodes:l.nodes,simulation:this.simulation,onMouseOver:f,onMouseOut:d,onDblClick:h,time:o}),i.h(a.default,{nodes:l.nodes,onMouseOver:f,onMouseOut:d,onDblClick:h}),c?i.h("foreignObject",{className:p.foreignObject,x:c.x+10,y:c.y+5},i.h(v.default,{info:c,time:o})):null))},t}(i.Component);t.default=_},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},s=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),a=n(5),l=n(13),c=n(18),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ref=u.createRef(),t}return r(t,e),t.prototype.componentDidMount=function(){var e=this.ref.current,t=this.props.link;a.select(e).data([t])},t.prototype.render=function(){var e=this.props,t=e.link,n=e.id,o=s(e,["link","id"]),r=t.type,a=l[r];return u.h("path",i({id:n},o,{className:c.default(l.link,a),ref:this.ref,strokeWidth:5}))},t}(u.Component),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ref=u.createRef(),t}return r(t,e),t.prototype.componentDidMount=function(){var e=this.ref.current,t=this.props.link;a.select(e).data([t])},t.prototype.render=function(){var e=this.props,t=e.link,n=e.xlinkHref,o=u.h("textPath",{startOffset:"50%",xlinkHref:n},t.linkQuality);return u.h("text",{filter:"url(#solid)",className:l.linkLabel,ref:this.ref,dy:4},o)},t}(u.Component);t.default=function(e){var t=e.links;return u.h("g",{className:l.links},u.h("defs",null,u.h("filter",{x:"-0.1",y:"0",width:"1.2",height:"1",id:"solid"},u.h("feFlood",{"flood-color":"#eef5f9"}),u.h("feComposite",{in:"SourceGraphic"}))),t.map((function(e,t){return u.h(p,{id:"edgepath"+t,key:"link"+t,link:e})})),t.map((function(e,t){return u.h(f,{xlinkHref:"#edgepath"+t,key:"label"+t,link:e})})))}},function(e,t,n){(t=e.exports=n(22)(!1)).push([e.i,"._3UsUxhqLZHNtuszm8EI_1s {\n  width: 100%;\n  height: 100%;\n}\n\n.I_ddn1k4fvLAQLh2qam_d {\n  stroke: #fff;\n  stroke-width: 1.5px;\n  cursor: pointer;\n}\n\n.oJeonYZxCbLDqS9yrBiG5 {\n  stroke: #999;\n  stroke-opacity: 1;\n}\n.ipEfrGz4VI8P2v-Hm0MgN {\n  text-anchor: middle;\n  pointer-events: none;\n  font-size: 10px;\n  fill: #D3D3D3;\n  flood-color: #FFFFFF;\n  flood-opacity:1;\n  text-anchor: middle;\n}\n\n._1Lbj3ZGx-6fCI9RF6HXljF {\n  font-size: 14px;\n  fill: black;\n  cursor: pointer;\n}\n._1Lbj3ZGx-6fCI9RF6HXljF._3-cVoVzbbOOvbMydd2G1J6 {\n  display: none;\n}\n\n._2CLL_9wciqnc3LHoEJMFRp {\n  -custom-noop: noop;\n}\n.qlfIBJJwZ24x2b-QgFmLW {\n  -custom-noop: noop;\n}\n._1eZESYvchmyr8mmKIBCmBR {\n  -custom-noop: noop;\n}\n._113dX3BKO5fr4pAzdXC69K {\n  fill: green;\n}\n._1NuCcdsGVpzqyMOXPkAEco, ._3-cVoVzbbOOvbMydd2G1J6 {\n  fill: blue;\n}\n\n._16GkebpgcHFnf2uJIgqlWu {\n  stroke: blue;\n}\n._2nbipMaMmif3N4YQw4wgIC {\n  stroke: blue;\n  stroke-dasharray: 5;\n}\n._2kxuG_VR9_Fy7SGa4OSXVQ {\n  stroke: green;\n}\n._3fc-4gZS_GCPbobf1dvlBo {\n  stroke: green;\n  opacity: 0.8;\n  stroke-dasharray: 5;\n}\n\n.nnn_JJwC5kC3gKbpcaXVA {\n  overflow: visible;\n}\n\n._2eFLqqfzaRUzHTEot23elk {\n  opacity: 0.5;\n  stroke: gray;\n}",""]),t.locals={container:"_3UsUxhqLZHNtuszm8EI_1s",node:"I_ddn1k4fvLAQLh2qam_d",link:"oJeonYZxCbLDqS9yrBiG5",linkLabel:"ipEfrGz4VI8P2v-Hm0MgN",label:"_1Lbj3ZGx-6fCI9RF6HXljF",Coordinator:"_3-cVoVzbbOOvbMydd2G1J6",labels:"_2CLL_9wciqnc3LHoEJMFRp",links:"qlfIBJJwZ24x2b-QgFmLW",nodes:"_1eZESYvchmyr8mmKIBCmBR",EndDevice:"_113dX3BKO5fr4pAzdXC69K",Router:"_1NuCcdsGVpzqyMOXPkAEco",Router2Coordinator:"_16GkebpgcHFnf2uJIgqlWu",Router2Router:"_2nbipMaMmif3N4YQw4wgIC",EndDevice2Coordinator:"_2kxuG_VR9_Fy7SGa4OSXVQ",EndDevice2Router:"_3fc-4gZS_GCPbobf1dvlBo",foreignObject:"nnn_JJwC5kC3gKbpcaXVA",offline:"_2eFLqqfzaRUzHTEot23elk"}},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(5),u=n(1),a=n(13),l=n(18),c=i({},a),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ref=u.createRef(),t.onMouseOut=function(){var e=t.props,n=e.node,o=e.onMouseOut;o&&o(n)},t.onMouseOver=function(){var e=t.props,n=e.node,o=e.onMouseOver;o&&o(n)},t.onDblClick=function(){var e=t.props,n=e.node,o=e.onDblClick;o&&o(n)},t}return r(t,e),t.prototype.componentDidMount=function(){var e=this.ref.current;s.select(e).data([this.props.node])},t.prototype.render=function(){var e=this.props.node,t=e.device.type,n=c[t],o=l.default(a.label,n),r=this.onMouseOut,i=this.onMouseOver,s=this.onDblClick;return u.h("text",{onMouseOut:r,onMouseOver:i,onDblClick:s,className:o,ref:this.ref,dy:-4,dx:3},e.name)},t}(u.Component);t.default=function(e){var t=e.nodes,n=e.onMouseOut,o=e.onMouseOver,r=e.onDblClick,i=t.map((function(e,t){return u.h(p,{onMouseOut:n,onMouseOver:o,onDblClick:r,key:t,node:e})}));return u.h("g",{className:a.labels},i)}},,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(41),r=n(11),i=function(e){var t,n=e.friendly_name,o=e.ieeeAddr;return null!=n?n:""+(null!==(t=null==o?void 0:o.slice(-4))&&void 0!==t?t:"Unknow device")};t.convert2graph=function(e){var t={id:"SLS GW",device:o.GATEWAY,name:"GW"},n={nodes:[t],links:[]},s=function(e,t){return e+"2"+t};return Object.entries(e).forEach((function(o){var u,a=o[0],l=o[1];n.nodes.push({id:a,name:i(l),device:l}),Array.isArray(l.Rtg)&&l.Rtg.length?l.Rtg.forEach((function(t){var o;n.links.push({source:a,target:t.toString(),linkQuality:null===(o=null==l?void 0:l.st)||void 0===o?void 0:o.linkquality,type:s(l.type,e[t.toString()].type)})})):n.links.push({source:a,target:t.id,linkQuality:null===(u=null==l?void 0:l.st)||void 0===u?void 0:u.linkquality,type:s(l.type,r.DeviceType.Coordinator)})})),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(11);t.GATEWAY={ieeeAddr:"Coordinator node",last_seen:(Date.now()/1e3).toString(),type:o.DeviceType.Coordinator,ManufName:"SLS gateway"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),r=n(43),i=n(1),s=n(23),u=function(e,t){var n,r,i=[];if(e.ManufName&&(e.ModelId?i.push(e.ManufName+" "+e.ModelId):i.push(e.ManufName)),e.ieeeAddr&&i.push(e.ieeeAddr),(null===(n=null==e?void 0:e.st)||void 0===n?void 0:n.linkquality)&&i.push("LinkQuality: "+e.st.linkquality),0==i.length&&i.push("A very strange device..."),e.type!==o.DeviceType.Coordinator){if(e.last_seen&&t){var u=t.ts-parseInt(e.last_seen,10);i.push("Last seen: "+(r=u,[Math.floor(r/3600),Math.floor(r/60)%60,r%60].map((function(e){return e<10?"0"+e:e})).filter((function(e,t){return"00"!==e||t>0})).join(":")))}s.isOnline(e,t)||i.push("Offline")}return i};t.default=function(e){var t=e.info,n=e.time,o=t.device;return i.h("div",{className:r.tooltip},u(o,n).map((function(e){return i.h("div",null,e)})))}},function(e,t,n){var o=n(21),r=n(44);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1},s=(o(r,i),r.locals?r.locals:{});e.exports=s},function(e,t,n){(t=e.exports=n(22)(!1)).push([e.i,"\n\n._1rk7BV3JOGLq0LBsDwlTT {\n    border: 1px solid #000;\n    min-width: 200px;\n    background-color: #fff;\n    border-radius: 5px;\n    padding: 5px;\n    box-shadow: 2px 2px 3px 0px rgba(0,0,0,0.75);\n\n}\n",""]),t.locals={tooltip:"_1rk7BV3JOGLq0LBsDwlTT"}}]);