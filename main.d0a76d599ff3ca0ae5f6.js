(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{0:function(e,t){},1:function(e,t){},2:function(e,t){},"2YZa":function(e,t,n){"use strict";n.r(t);n("caKC"),n("q4sD");var r=n("q1tI"),a=n.n(r),o={container:"_1TK12NlMUcpu0IZGw5KG9F",img:"-vLZFy4QqTaA5Lql2j7WL",node:"_3VABKCYaUBV0N55MRkEiCg",link:"_2MMYgLsCQ5mPT-AJSdZ4Uz",linkLabel:"EFSV-Lj6sJyoW14QA3ig0",links:"_3m9RTJKJZqiJx1UmLLzi4",nodes:"_1RxBn1bAxqYxk5W0mPwZMS",EndDevice:"JhUbmgThutQMk8laPcsxg",Coordinator:"_3F14ZWmKtSPPHai2y_MRRj",Router:"_1I1ZcuMgRbn_B5HXF9Z2mw",BrokenLink:"_3FeEi6FG3R9pYpboNF-OBu",Coordinator2Router:"_2cFMSmedVqD5hjj2K7XpsQ",Router2Coordinator:"_3KnTt0kzrMwLh56UMBBqwe",Router2Router:"_3HeSfltIQjH_mQxhaoHnCs",Coordinator2EndDevice:"_2zGuiMZ7r-Z4mfRvCVQEAp",EndDevice2Coordinator:"_35uGMHQCj1Sx5FyJk5-Ec1",Router2EndDevice:"_1nD8O-bIFFZWctv6x4zD8j",EndDevice2Router:"_2tVxslI3DwN1gBA6s3V24b",foreignObject:"_1PgTRqMkYD7R1RqIF7R5ni",offline:"_3goiiMv86rV5wazL6jDpjU",controls:"RIAc5GeET4TLTKyCVy7yK"},i=n("TSYQ"),l=n.n(i),c=n("AKWm"),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},p=function(e){var t=e.link.linkType,n=e.id,r=u(e,["link","id"]);return a.a.createElement("path",s({id:n,className:l()(o.link,o[t]),strokeWidth:1,fill:"transparent"},r))},m=function(e){var t=e.link;return a.a.createElement("text",{className:o.linkLabel},t.linkqualities.join("/"))},d=function(e){var t=e.links,n=Object(r.useRef)();return Object(r.useLayoutEffect)((function(){Object(c.a)(n.current).selectAll("."+o.link).data(t),Object(c.a)(n.current).selectAll("."+o.linkLabel).data(t)}),[t.length]),a.a.createElement("g",{ref:n,className:o.links},t.map((function(e){return a.a.createElement(p,{id:"edgepath"+e.sourceIeeeAddr+"-"+e.targetIeeeAddr+"-"+e.linkType,key:"link"+e.sourceIeeeAddr+"-"+e.targetIeeeAddr+"-"+e.linkType,link:e})})),t.map((function(e){return a.a.createElement(m,{xlinkHref:"#edgepath"+e.sourceIeeeAddr+"-"+e.targetIeeeAddr+"-"+e.linkType,key:"label"+e.sourceIeeeAddr+"-"+e.targetIeeeAddr+"-"+e.linkType,link:e})})))},f=n.p+"d921749ee5fe6bc67e4ca4a150544be0.png",v=n("xyvv"),h=function(){return(h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},y=function(e){return"/device/"+e},g=function(e,t){return void 0===t&&(t=4),"0x"+(""+"0".repeat(t)+e.toString(16)).substr(-1*t).toUpperCase()},b=function(e){return Math.random().toString(36).substr(2,e)};function E(e,t){var n=this[e];return n instanceof Map?{dataType:"Map",value:Array.from(n.entries())}:t}function O(e,t){return"object"==typeof t&&null!==t&&"Map"===t.dataType?new Map(t.value):t}var _,k,N=function(e){return JSON.stringify(e,E)},w=function(e,t){var n=new Blob([N(e)],{type:"octet/stream"}),r=window.URL.createObjectURL(n),a=document.createElement("a");document.body.appendChild(a),a.href=r,a.download=t,setTimeout((function(){a.click(),window.URL.revokeObjectURL(r),document.body.removeChild(a)}),1)},C=function(e){return e?e.endpoints?Array.from(e.endpoints.keys()):e.members?e.members.map((function(e){return e.endpoint})):[]:[]},j=function(){return(j=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},S=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},P=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],i=0,l=o.length;i<l;i++,a++)r[a]=o[i];return r},x=function(e){return f},A=[function(e){var t,n;return"https://www.zigbee2mqtt.io/images/devices/"+((null==(n=null===(t=null==e?void 0:e.definition)||void 0===t?void 0:t.model)?void 0:n.replace(/:|\s|\//g,"-"))+".jpg")},function(e){var t,n;return"https://slsys.github.io/Gateway/devices/png/"+(null===(n=null===(t=null==e?void 0:e.definition)||void 0===t?void 0:t.model)||void 0===n?void 0:n.replace("/","_"))+".png"},x],R=function(e){var t,n,o=Object(r.useState)(A),i=o[0],c=o[1],s=e.device,u=e.deviceStatus,p=e.type,m=void 0===p?"img":p,d=e.className,f=S(e,["device","deviceStatus","type","className"]),v=x();(null===(t=null==s?void 0:s.definition)||void 0===t?void 0:t.model)&&i.length&&(v=i[0](s));var h=function(){var e=P(i);e.shift(),c(e)},y="updating"===(null===(n=null==u?void 0:u.update)||void 0===n?void 0:n.state)?a.a.createElement("i",{title:"Updating firmware",className:"fa fa-sync fa-spin position-absolute bottom-0 right-0"}):null,g=s.interviewing?a.a.createElement("i",{title:"Interviewing",className:"fa fa-spinner fa-spin position-absolute bottom-0 right-0"}):null,b=s.interviewing||s.interview_completed?null:a.a.createElement("i",{title:"Interview failed",className:"fa fa-exclamation-triangle position-absolute top-0 right-0 text-danger"});switch(m){case"svg":return v?a.a.createElement("image",j({},f,{onError:h,href:v})):null;case"img":default:return v?a.a.createElement("div",j({className:l()(d,"position-relative")},f),a.a.createElement("img",{onError:h,src:v,className:"position-relative"}),g,y,b):null}},I=n("Enya"),D=n("AJ/N"),M=(_=function(e,t){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),T=function(e,t,n){return function(e,t,n,r,a){for(var o=Math.PI/n,i=2*n,l="",c=0;c<i;c++){var s=c%2==0?a:r;l+=e+Math.cos(c*o+60)*s+", "+(t+Math.sin(c*o+60)*s)+" "}return l}(15,15,e,t,n)},L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ref=Object(r.createRef)(),t.onMouseOut=function(){var e=t.props,n=e.node,r=e.onMouseOut;r&&r(n,t.ref.current)},t.onMouseOver=function(){var e=t.props,n=e.node,r=e.onMouseOver;r&&r(n,t.ref.current)},t.onDblClick=function(){var e=t.props,n=e.node,r=e.onDblClick;r&&r(n,t.ref.current)},t}return M(t,e),t.prototype.componentDidMount=function(){var e=this.ref.current,t=this.props.node;Object(c.a)(e).data([t])},t.prototype.render=function(){var e=this.props.node,t=this.onMouseOver,n=this.onMouseOut,r=this.onDblClick,i=e.type,c=l()(o.node,o[i]);return a.a.createElement("g",{className:c,ref:this.ref,onMouseOver:t,onMouseOut:n,onDoubleClick:r},"Coordinator"===e.type?a.a.createElement("polygon",{points:T(5,5,14)}):a.a.createElement(R,{type:"svg",width:32,height:32,device:e,className:""+o.img}),a.a.createElement("text",null,e.friendlyName))},t}(r.Component),F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={toggle:!1},t}return M(t,e),t.prototype.updateDrag=function(){var e=this.props.simulation,t=Object(D.a)().on("start",(function(t,n){t.active||e.alphaTarget(.3).restart(),n.fx=n.x,n.fy=n.y})).on("drag",(function(e,t){t.fx=e.x,t.fy=e.y})).on("end",(function(t,n){t.active||e.alphaTarget(0),n.fx=void 0,n.fy=void 0}));Object(I.a)("."+o.node).call(t)},t.prototype.componentDidMount=function(){this.updateDrag()},t.prototype.componentDidUpdate=function(){this.updateDrag()},t.prototype.render=function(){var e=this.props,t=e.nodes,n=e.onMouseOut,r=e.onMouseOver;return a.a.createElement("g",{className:o.nodes},t.map((function(e){return a.a.createElement(L,{onMouseOut:n,onMouseOver:r,key:e.ieeeAddr,node:e})})))},t}(r.Component);!function(e){e[e.NeigbhorIsParent=0]="NeigbhorIsParent",e[e.NeigbhorIsAChild=1]="NeigbhorIsAChild",e[e.NeigbhorIsASibling=2]="NeigbhorIsASibling",e[e.NoneOfTheAbove=3]="NoneOfTheAbove",e[e.NeigbhorIsAFormerChild=4]="NeigbhorIsAFormerChild"}(k||(k={}));var G,B,U=n("Pnur"),q=n("0JYD"),J=n("SWTx"),V=(n("6k13"),Object(J.a)((G='{\n  "devices": {"dataType":"Map","value":[]},\n  "deviceStates": {"dataType":"Map","value":[]},\n  "touchlinkDevices": [],\n  "touchlinkScanInProgress": false,\n  "touchlinkIdentifyInProgress": false,\n  "touchlinkResetInProgress": false,\n  "networkGraph": {\n    "links": [],\n    "nodes": []\n  },\n  "networkGraphIsLoading": false,\n  "groups": [],\n  "bridgeConfig": {},\n  "bridgeInfo": {},\n  "logs": []\n}',JSON.parse(G,O)))),H=n("ttB+"),W=n("k8Y/"),z=n.n(W),K=function(){return(K=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Z=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))},Q=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Y=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],i=0,l=o.length;i<l;i++,a++)r[a]=o[i];return r},X=new H.a,$=[/MQTT publish/],ee=function(e){var t,n="",r="";if(void 0!==(t=e).level&&void 0!==t.message)n=e.message,r=e.level;else if(function(e){return void 0!==e.status}(e))switch(e.status){case"error":r="error",n=e.error}switch(r){case"error":case"warning":X.error(n);break;case"info":X.success(n)}},te=function(){function e(e){var t=this;this.send=function(e,n){console.debug("Calling API",{topic:e,payload:n}),t.socket.send(JSON.stringify({topic:e,payload:n}))},this.urlProvider=function(){return Z(t,void 0,void 0,(function(){var e,t;return Q(this,(function(n){return e=new URL(this.url),t=localStorage.getItem("z2m-token"),!!localStorage.getItem("z2m-auth")&&(t||(t=prompt("enter your z2m admin token"),localStorage.setItem("z2m-token",t)),e.searchParams.append("token",t)),[2,e.toString()]}))}))},this.procsessBridgeMessage=function(e){switch(e.topic){case"bridge/config":V.setState({bridgeConfig:e.payload});break;case"bridge/info":V.setState({bridgeInfo:e.payload});break;case"bridge/devices":var t=new Map;z()(e.payload,"friendly_name").forEach((function(e){var n=K({},e);n.endpoints=new Map(Object.entries(e.endpoints)),t.set(e.ieee_address,n)})),V.setState({devices:t});break;case"bridge/groups":V.setState({groups:e.payload});break;case"bridge/event":break;case"bridge/logging":var n=V.getState().logs,r=Y(n.slice(-100));r.push(e.payload),V.setState({logs:r});var a=e.payload;$.every((function(e){return!e.test(a.message)}))&&ee(a);break;case"bridge/response/networkmap":var o=e.payload;if("ok"==o.status){var i=o.data.value;V.setState({networkGraphIsLoading:!1,networkGraph:(u=i,p={},m=new Map,u.nodes.forEach((function(e){p[e.ieeeAddr]=e})),u.links.sort((function(e,t){return e.relationship-t.relationship})).forEach((function(e){var t=p[e.source.ieeeAddr],n=p[e.target.ieeeAddr];if(t&&n){var r=[e.source.ieeeAddr,e.target.ieeeAddr].sort().join(""),a=m.get(r),o=[t.type,n.type].join("2");a?(a.linkqualities.push(e.linkquality),a.relationships.push(e.relationship)):m.set(r,h(h({},e),{source:e.source.ieeeAddr,linkType:o,target:e.target.ieeeAddr,linkqualities:[e.linkquality],relationships:[e.relationship]}))}else console.warn("Broken link",e)})),u.links=Array.from(m.values()),u)})}else V.setState({networkGraphIsLoading:!1});break;case"bridge/response/touchlink/scan":var l=e.payload,c=l.status,s=l.data;"ok"===c?V.setState({touchlinkScanInProgress:!1,touchlinkDevices:s.found}):V.setState({touchlinkScanInProgress:!1});break;case"bridge/response/touchlink/identify":V.setState({touchlinkIdentifyInProgress:!1});break;case"bridge/response/touchlink/factory_reset":V.setState({touchlinkResetInProgress:!1})}var u,p,m;e.topic.startsWith("bridge/response/")&&ee(e.payload)},this.onClose=function(e){4401===e.code&&(localStorage.setItem("z2m-auth","true"),localStorage.removeItem("z2m-token"),X.error("Unauthorized"),setTimeout((function(){window.location.reload()}),1e3))},this.onMessage=function(e){var n={};try{n=JSON.parse(e.data)}catch(t){X.error(t.message),X.error(e.data)}if(n.topic.startsWith("bridge/"))t.procsessBridgeMessage(n);else{var r=V.getState().deviceStates,a=new Map(r);a.set(n.topic,K(K({},a.get(n.topic)),n.payload)),V.setState({deviceStates:a})}},this.url=e}return e.prototype.connect=function(){this.socket=new q.a(this.urlProvider),this.socket.addEventListener("message",this.onMessage),this.socket.addEventListener("close",this.onClose)},e}(),ne=""+window.location.host+document.location.pathname+"api",re=new te(("https:"===location.protocol?"wss":"ws")+"://"+ne),ae=function(){return(ae=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},oe=function(e){return{addBind:function(e,t,n,r){var a={from:t,to:n,clusters:r};return re.send("bridge/request/device/bind",a),Promise.resolve()},removeBind:function(e,t,n,r){var a={from:t,to:n,clusters:r};return re.send("bridge/request/device/unbind",a),Promise.resolve()},setStateValue:function(e,t,n,r){var a;return re.send(t+"/set",((a={})[n]=r,a)),Promise.resolve()},setDeviceState:function(e,t,n){return re.send(t+"/set",n),Promise.resolve()},getDeviceState:function(e,t,n){return re.send(t+"/get",n),Promise.resolve()},setPermitJoin:function(e,t,n){return void 0===t&&(t=!0),re.send("bridge/request/permit_join",{value:t,device:null==n?void 0:n.friendly_name}),Promise.resolve()},renameDevice:function(e,t,n,r){return re.send("bridge/request/device/rename",{from:t,to:n,homeassistant_rename:r}),Promise.resolve()},removeDevice:function(e,t,n,r){return re.send("bridge/request/device/remove",{id:t,force:n,block:r}),Promise.resolve()},configureDevice:function(e,t){return re.send("bridge/request/device/configure",{id:t}),Promise.resolve()},networkMapRequest:function(t){return e.setState({networkGraphIsLoading:!0,networkGraph:{nodes:[],links:[]}}),re.send("bridge/request/networkmap",{type:"raw",routes:!1}),Promise.resolve()},createGroup:function(e,t,n){var r={friendly_name:t};return n&&(r.id=n),re.send("bridge/request/group/add",r),Promise.resolve()},removeGroup:function(e,t){return re.send("bridge/request/group/remove",t),Promise.resolve()},addDeviceToGroup:function(e,t,n){return re.send("bridge/request/group/members/add",{group:n,device:t}),Promise.resolve()},removeDeviceFromGroup:function(e,t,n){return re.send("bridge/request/group/members/remove",{device:t,group:n}),Promise.resolve()},renameGroup:function(e,t,n){return re.send("bridge/request/group/rename",{from:t,to:n}),Promise.resolve()},touchlinkScan:function(){return e.setState({touchlinkScanInProgress:!0,touchlinkDevices:[]}),re.send("bridge/request/touchlink/scan",""),Promise.resolve()},touchlinkIdentify:function(t,n){return e.setState({touchlinkIdentifyInProgress:!0}),re.send("bridge/request/touchlink/identify",n),Promise.resolve()},touchlinkReset:function(t,n){return e.setState({touchlinkResetInProgress:!0}),re.send("bridge/request/touchlink/factory_reset",n),Promise.resolve()},checkOTA:function(e,t){return re.send("bridge/request/device/ota_update/check",{id:t}),Promise.resolve()},updateOTA:function(e,t){return re.send("bridge/request/device/ota_update/update",{id:t}),Promise.resolve()},updateConfigValue:function(e,t,n){return re.send("bridge/request/config/"+t,n),Promise.resolve()},resetZnp:function(e){return re.send("bridge/config/reset",""),Promise.resolve()},exportState:function(e){return w(e,"state.json"),Promise.resolve()},configureReport:function(e,t,n){return re.send("bridge/request/device/configure_reporting",ae({id:t},n)),Promise.resolve()}}},ie=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),le=function(){return(le=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},ce=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},se=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){var e=t.props,n=e.item,r=e.onClick,a=e.promt,o=!0;a&&(o=confirm("string"==typeof a?a:"Are you sure?")),o&&r&&r(n)},t}return ie(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=(e.item,e.promt,ce(e,["children","item","promt"]));return a.a.createElement("button",le({type:"button"},n,{onClick:this.onClick}),t)},t}(r.Component),ue=n("VIHS"),pe=n("89eD"),me=n("iQ9W"),de=n("0LFD"),fe=n("cnUW"),ve=n("0rNn"),he=n("pVjw"),ye=n("2TRZ"),ge=[{title:"IsParent",relationship:k.NeigbhorIsParent},{title:"IsAChild",relationship:k.NeigbhorIsAChild},{title:"IsASibling",relationship:k.NeigbhorIsASibling},{title:"NoneOfTheAbove",relationship:k.NoneOfTheAbove}],be=function(){return a.a.createElement("div",{className:"d-flex align-items-center"},a.a.createElement("strong",null,"Loading, please wait."),a.a.createElement("div",{className:"spinner-border ml-2",role:"status"},a.a.createElement("span",{className:"sr-only"},"Loading...")))},Ee=n("0XPj"),Oe=n.n(Ee),_e=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ke=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],i=0,l=o.length;i<l;i++,a++)r[a]=o[i];return r},Ne=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},we=[k.NeigbhorIsAChild,k.NeigbhorIsParent],Ce=function(e){return"Router2Router"===e.linkType?1:we.includes(e.relationship)?.5:0},je={BrokenLink:450,Router2Router:200,Coordinator2Router:200,Coordinator2EndDevice:50,EndDevice2Router:50},Se=function(e){var t;return null!==(t=je[e.linkType])&&void 0!==t?t:200},Pe=function(e){var t=e.transform,n=e.node,r=e.link,a=e.linkLabel;e.links.forEach((function(e){var n=t.apply([e.source.x,e.source.y]),r=n[0],a=n[1],o=t.apply([e.target.x,e.target.y]),i=o[0],l=(o[1]-a)/(i-r);e.x=(i+r)/2,e.y=(i-r)*l/2+a})),r.attr("d",(function(e){return function(e,t){var n=e.source,r=e.target,a=t.apply([n.x,n.y]),o=a[0],i=a[1],l=t.apply([r.x,r.y]);return"M "+o+" "+i+" L "+l[0]+" "+l[1]}(e,t)})),a.attr("x",(function(e){return t.applyX((n=100,r=e.source,a=e.target,n*Math.cos(Ne(r,a))+r.x));var n,r,a})).attr("y",(function(e){return t.applyY((n=100,r=e.source,a=e.target,n*Math.sin(Ne(r,a))+r.y));var n,r,a}));n.attr("transform",(function(e){var n=t.apply([e.x,e.y]);return"translate("+(n[0]-16)+", "+(n[1]-16)+")"}))},xe=function(e){var t=e.networkGraph,n=e.links,r=e.selectedNode,a=e.node,o=e.link,i=e.linkLabel,l=new Set;t.nodes.forEach((function(e){return l.add(e.ieeeAddr+","+e.ieeeAddr)})),n.forEach((function(e){return l.add(e.sourceIeeeAddr+","+e.targetIeeeAddr)}));var c=function(e,t){return l.has(e.ieeeAddr+","+t.ieeeAddr)},s=function(e){return e.source===r||e.target===r?1:.15};r?(a.style("opacity",(function(e){return c(r,e)||c(e,r)?1:.15})),o.style("stroke-opacity",s),i.style("opacity",s)):(a.style("opacity",1),o.style("stroke-opacity",1),i.style("opacity",1))},Ae=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ref=Object(r.createRef)(),t.svgRef=Object(r.createRef)(),t.simulation=Object(ue.a)(),t.state={selectedNode:null,width:0,height:0,visibleLinks:we},t.transform=ye.b,t.updateNodes=function(){var e=t.props.networkGraph;if(e.nodes.length){var n=t.state,r=n.visibleLinks,a=n.selectedNode,i=n.width,l=n.height,s=Object(I.a)("."+o.node),u=Object(I.a)("."+o.link),p=Object(I.a)("."+o.linkLabel),m=e.links.filter((function(e){return Oe()(r,e.relationships).length}));t.simulation.nodes(e.nodes.concat(m)),t.simulation.force("link").links(m),t.simulation.on("tick",(function(){return Pe({transform:t.transform,node:s,link:u,linkLabel:p,links:m})}));var d=Object(c.a)(".everything");Object(ye.a)().extent([[0,0],[i,l]]).scaleExtent([.1,8]).on("zoom",(function(e){var t=e.transform;d.attr("transform",t)}))(Object(c.a)(t.svgRef.current)),xe({networkGraph:e,links:m,selectedNode:a,node:s,link:u,linkLabel:p}),s.on("click",(function(e,n){var r=t.state.selectedNode;t.setState({selectedNode:r?null:n})})),t.simulation.alphaTarget(.03).restart()}},t.onRequestClick=function(){(0,t.props.networkMapRequest)()},t.onLinkTypeFilterChange=function(e){var n=t.state.visibleLinks,r=e.target,a=r.checked,o=r.value,i=parseInt(o,10),l=ke(n);a?l.push(i):l=l.filter((function(e){return e!==i})),t.setState({visibleLinks:l})},t}return _e(t,e),t.prototype.updateForces=function(e,t){this.simulation=this.simulation.force("link",Object(pe.a)().id((function(e){return e.ieeeAddr})).distance(Se).strength(Ce)).force("charge",Object(he.a)().strength(-700)).force("collisionForce",Object(me.a)()).force("center",Object(de.a)(e/2,t/2)).force("x",Object(fe.a)().strength(.1)).force("y",Object(ve.a)().strength(.2))},t.prototype.initPage=function(){var e=this.ref.current.getBoundingClientRect(),t=e.width,n=e.height;this.setState({width:t,height:n}),this.updateForces(t,n)},t.prototype.componentDidMount=function(){this.initPage()},t.prototype.componentDidUpdate=function(){this.updateNodes()},t.prototype.renderMap=function(){var e=this.state,t=e.width,n=e.height,r=e.visibleLinks,o=this.props.networkGraph,i=o.links.filter((function(e){return Oe()(r,e.relationships).length>0}));return a.a.createElement("svg",{ref:this.svgRef,viewBox:"0 0 "+t+" "+n},a.a.createElement("g",{className:"everything"},a.a.createElement(d,{links:i}),a.a.createElement(F,{nodes:o.nodes,simulation:this.simulation})))},t.prototype.renderMessage=function(){var e=this.props.networkGraphIsLoading;return a.a.createElement("div",{className:"h-100 d-flex justify-content-center align-items-center"},e?a.a.createElement("div",null,a.a.createElement(be,null),a.a.createElement("div",null,"Depending on the size of your network this can take somewhere between 10 seconds and 2 minutes.")):a.a.createElement(se,{onClick:this.onRequestClick,className:"btn btn-primary d-block"},"Load map"))},t.prototype.renderMapControls=function(){var e=this,t=this.state.visibleLinks;return a.a.createElement("div",{className:o.controls},ge.map((function(n){return a.a.createElement("div",{key:n.title,className:"form-check form-check-inline"},a.a.createElement("input",{onChange:e.onLinkTypeFilterChange,className:"form-check-input",type:"checkbox",id:n.title,value:n.relationship,checked:t.includes(n.relationship)}),a.a.createElement("label",{className:"form-check-label",htmlFor:n.title},n.title))})),a.a.createElement("div",{className:"btn-group btn-group-sm",role:"group"},a.a.createElement(se,{title:"Refresh data",className:"btn btn-primary",onClick:this.onRequestClick},a.a.createElement("i",{className:"fa fa-sync"}))))},t.prototype.render=function(){var e=this.props.networkGraph;return a.a.createElement("div",{className:o.container,ref:this.ref},e.nodes.length?a.a.createElement(r.Fragment,null,this.renderMapControls()," ",this.renderMap()):this.renderMessage())},t}(r.Component),Re=Object(U.connect)(["networkGraph","networkGraphIsLoading"],oe)(Ae),Ie=n("55Ip"),De=n("Ty5D"),Me=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Te=function(e){return a.a.createElement("div",{className:"modal-header"},e.children)},Le=function(e){return a.a.createElement("div",{className:"modal-body"},e.children)},Fe=function(e){return a.a.createElement("div",{className:"modal-footer"},e.children)},Ge=function(e){function t(t){var n=e.call(this,t)||this;return n.state={modalShow:"",display:"none"},n.openModal=n.openModal.bind(n),n.closeModal=n.closeModal.bind(n),n}return Me(t,e),t.prototype.openModal=function(){this.setState({modalShow:"show",display:"block"})},t.prototype.closeModal=function(){this.setState({modalShow:"",display:"none"})},t.prototype.componentDidMount=function(){this.props.isOpen?this.openModal():this.closeModal()},t.prototype.componentDidUpdate=function(e){e.isOpen!==this.props.isOpen&&(this.props.isOpen?this.openModal():this.closeModal())},t.prototype.render=function(){return a.a.createElement("div",{className:"modal fade "+this.state.modalShow,role:"dialog","aria-hidden":"true",style:{display:this.state.display}},a.a.createElement("div",{className:"modal-dialog",role:"document"},a.a.createElement("div",{className:"modal-content"},this.props.children)))},t}(r.Component),Be=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ue=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))},qe=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Je=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isRenameModalOpened:!1,isDeviceRemovalModalOpened:!1,renameParams:{friendlyName:t.props.device.friendly_name,isHassRename:!1},removeParams:{block:!1,force:!1}},t.onRenameClick=function(){return Ue(t,void 0,void 0,(function(){var e,t,n,r;return qe(this,(function(a){switch(a.label){case 0:return e=this.props,t=e.renameDevice,n=e.device,r=this.state.renameParams,[4,t(n.friendly_name,r.friendlyName,r.isHassRename)];case 1:return a.sent(),this.setState({isRenameModalOpened:!1}),[2]}}))}))},t.onRemoveClick=function(){var e=t.props,n=e.removeDevice,r=e.device,a=t.state.removeParams;n(r.friendly_name,a.force,a.block),t.setState({isDeviceRemovalModalOpened:!1})},t.toggleRenameModal=function(){var e=t.state.isRenameModalOpened;t.setState({isRenameModalOpened:!e})},t.toggleDeviceRemovalModal=function(){var e=t.state.isDeviceRemovalModalOpened;t.setState({isDeviceRemovalModalOpened:!e})},t.onHassEntityIdChange=function(e){var n=t.state.renameParams,r=e.target.checked;n.isHassRename=r,t.setState({renameParams:n})},t.onFriendlyNameChange=function(e){var n=t.state.renameParams,r=e.target.value;n.friendlyName=r,t.setState({renameParams:n})},t.onDeviceRemovalParamChange=function(e){var n=t.state.removeParams,r=e.target,a=r.checked;n[r.name]=a,t.setState({removeParams:n})},t}return Be(t,e),t.prototype.renderRenameButton=function(){var e,t=this.props,n=t.bridgeInfo,r=t.device,o=this.state,i=o.isRenameModalOpened,l=o.renameParams;return a.a.createElement(a.a.Fragment,null,a.a.createElement(se,{className:"btn btn-secondary",onClick:this.toggleRenameModal,title:"Rename device"},a.a.createElement("i",{className:"fa fa-edit"})),a.a.createElement(Ge,{isOpen:i},a.a.createElement(Te,null,a.a.createElement("h3",null,"Rename device"),a.a.createElement("small",null,r.friendly_name)),a.a.createElement(Le,null,a.a.createElement("div",{className:"mb-3"},a.a.createElement("label",{htmlFor:"fn"+r.ieee_address,className:"form-label"},"Friendly name"),a.a.createElement("input",{id:"fn"+r.ieee_address,onChange:this.onFriendlyNameChange,type:"text",className:"form-control",value:l.friendlyName})),(null===(e=null==n?void 0:n.config)||void 0===e?void 0:e.homeassistant)?a.a.createElement("div",{className:"form-check form-switch"},a.a.createElement("input",{className:"form-check-input",checked:l.isHassRename,type:"checkbox",id:"hass"+r.ieee_address,onChange:this.onHassEntityIdChange}),a.a.createElement("label",{className:"form-check-label",htmlFor:"hass"+r.ieee_address},"Update Home Assistant entity ID")):null),a.a.createElement(Fe,null,a.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.toggleRenameModal},"Close"),a.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.onRenameClick},"Save changes"))))},t.prototype.renderDeviceRemovalButton=function(){var e=this.props.device,t=this.state,n=t.isDeviceRemovalModalOpened,r=t.removeParams;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ge,{isOpen:n},a.a.createElement(Te,null,a.a.createElement("h3",null,"Remove device"),a.a.createElement("small",null,e.friendly_name)),a.a.createElement(Le,null,a.a.createElement("div",{className:"form-check form-switch"},a.a.createElement("input",{className:"form-check-input",name:"force",checked:r.force,type:"checkbox",id:"force"+e.ieee_address,onChange:this.onDeviceRemovalParamChange}),a.a.createElement("label",{className:"form-check-label",htmlFor:"force"+e.ieee_address},"Force remove")),a.a.createElement("div",{className:"form-check form-switch"},a.a.createElement("input",{className:"form-check-input",name:"block",checked:r.block,type:"checkbox",id:"block"+e.ieee_address,onChange:this.onDeviceRemovalParamChange}),a.a.createElement("label",{className:"form-check-label",htmlFor:"block"+e.ieee_address},"Block from joining again"))),a.a.createElement(Fe,null,a.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.toggleDeviceRemovalModal},"Close"),a.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:this.onRemoveClick},"Delete"))),a.a.createElement("button",{onClick:this.toggleDeviceRemovalModal,className:"btn btn-danger",title:"Remove device"},a.a.createElement("i",{className:l()("fa","fa-trash")})))},t.prototype.render=function(){var e,t=this.props,n=t.device,r=t.configureDevice,o=t.checkOTA,i=t.updateOTA,c=t.state;return a.a.createElement("div",{className:"btn-group btn-group-sm",role:"group"},this.renderRenameButton(),a.a.createElement(se,{className:"btn btn-secondary",onClick:r,item:n.friendly_name,title:"Reconfigure",promt:!0},a.a.createElement("i",{className:l()("fa","fa-cogs")})),"available"===(null===(e=null==c?void 0:c.update)||void 0===e?void 0:e.state)?a.a.createElement(se,{className:"btn btn-secondary",onClick:i,item:n.friendly_name,title:"Update OTA",promt:!0},a.a.createElement("i",{className:l()("fa","fa-cloud-download-alt")})):a.a.createElement(se,{className:"btn btn-secondary",onClick:o,item:n.friendly_name,title:"Check OTA"},a.a.createElement("i",{className:l()("fa","fa-cloud")})),this.renderDeviceRemovalButton())},t}(r.Component),Ve=Object(U.connect)(["bridgeInfo"],oe)(Je),He="_2UWt6cv5iKbBWQ1njU-Knh",We="TxlAB4ufmQ5iWcatxCVRX",ze=n("mwIZ"),Ke=n.n(ze),Ze=function(e){var t=new RegExp("[/| |:]","g");return e.replace(t,"_")},Qe=function(e){var t,n,o,i=e.device;if(i.supported){var l="https://www.zigbee2mqtt.io/information/supported_devices.html#"+encodeURIComponent(Ze(null===(n=null===(t=i.definition)||void 0===t?void 0:t.vendor)||void 0===n?void 0:n.toLowerCase()));return a.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:l},null===(o=i.definition)||void 0===o?void 0:o.vendor)}return a.a.createElement(r.Fragment,null,"Unsupported")},Ye=function(e){var t,n,r,o,i,l,c=e.device,s="https://www.zigbee2mqtt.io/how_tos/how_to_support_new_devices.html#how-to-support-new-devices",u="Unsupported";if(c.supported){var p=[encodeURIComponent(null===(n=null===(t=c.definition)||void 0===t?void 0:t.vendor)||void 0===n?void 0:n.toLowerCase()),encodeURIComponent(null===(o=null===(r=c.definition)||void 0===r?void 0:r.model)||void 0===o?void 0:o.toLowerCase())].join("-");s="https://www.zigbee2mqtt.io/devices/"+encodeURIComponent(Ze(null===(i=c.definition)||void 0===i?void 0:i.model))+".html#"+encodeURIComponent(Ze(p)),u=null===(l=c.definition)||void 0===l?void 0:l.model}return a.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:s},u)},Xe="_2Qj8QVth6tVVFe6VESug0N",$e="t22iUK3r3w1jlcSwxWXN9",et=function(){return(et=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},tt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},nt=function(e){var t=e.source,n=e.battery,o=e.batteryLow,i=e.showLevel,l=tt(e,["source","battery","batteryLow","showLevel"]),c="",s="";switch(t){case"Battery":if(s="Battery",void 0!==o&&(c=o?"fa-battery-empty "+$e+" text-danger":"fa-battery-full text-success",s+=o?" LOW":" OK"),void 0!==n)if(n>=85)c+=" fa-battery-full";else if(n>=75)c+=" fa-battery-three-quarters";else if(n>=50)c+=" fa-battery-half";else if(n>=25)c+=" fa-battery-quarter";else{if(!(n>=10))return a.a.createElement("span",{className:$e+" text-danger",role:"alert"},n,"%");c+=" fa-battery-empty "+$e}return s+=n?", power level "+n+"%":"",c||(c="fa-question"),a.a.createElement(r.Fragment,null,i?a.a.createElement("span",{className:"pe-2"},"Battery ",void 0!==n?n+"%":null):null,a.a.createElement("i",et({className:"fa "+c,title:s},l)));case"Mains (single phase)":case"DC Source":return a.a.createElement("i",et({className:"fa fa-plug "+Xe,title:t},l));default:return a.a.createElement("i",et({className:"fa fa-question",title:t},l))}},rt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),at=[{label:"Friendly name",render:function(e){return a.a.createElement("dd",{className:"col-12 col-md-7"},a.a.createElement("strong",null,e.friendly_name))}},{key:"type",label:"Device type"},{key:"definition.description",label:"Description",if:"supported"},{render:function(e){return a.a.createElement("dd",{className:"col-12 col-md-7"},a.a.createElement("p",{className:l()("mb-0","font-weight-bold",{"text-danger":!e.supported,"text-success":e.supported})},e.supported?"Supported":"Unsupported"))},label:"Support status"},{render:function(e){return a.a.createElement("dd",{className:"col-12 col-md-7"},e.definition.supports)},label:"Supports",if:"definition.supports"},{key:"ieee_address",label:"IEEE address"},{key:"network_address",label:"Network address",render:function(e){return a.a.createElement("dd",{className:"col-12 col-md-7"},g(e.network_address))}},{key:"date_code",label:"Firmware build date",if:"date_code"},{key:"software_build_id",label:"Firmware version",if:"software_build_id"},{key:"definition.vendor",label:"Vendor",if:"supported",render:function(e){return a.a.createElement("dd",{className:"col-12 col-md-7"},a.a.createElement(Qe,{device:e}))}},{key:"definition.model",label:"Model",if:"supported",render:function(e){return a.a.createElement("dd",{className:"col-12 col-md-7"},a.a.createElement(Ye,{device:e}))}},{label:"Power source",render:function(e,t){return a.a.createElement("dd",{className:"col-12 col-md-7"},a.a.createElement(nt,{showLevel:!0,source:e.power_source,battery:t.battery,batteryLow:t.battery_low}))}},{label:"Interview completed",render:function(e){return a.a.createElement("dd",{className:"col-12 col-md-7"},e.interview_completed?"Yes":"No")}}],ot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return rt(t,e),t.prototype.render=function(){var e,t,n,o=this.props,i=o.device,l=null!==(e=o.deviceStates.get(i.friendly_name))&&void 0!==e?e:{};return a.a.createElement(r.Fragment,null,a.a.createElement("div",{className:"d-flex justify-content-center"},a.a.createElement(R,{className:"card-img-top w-auto "+He,device:i,deviceStatus:l})),a.a.createElement("dl",{className:"row"},at.filter((function(e){return void 0===e.if||Ke()(i,e.if,!1)})).map((function(e){return a.a.createElement(r.Fragment,{key:e.label},a.a.createElement("dt",{className:"col-12 col-md-5"},e.label),e.render?e.render(i,l):a.a.createElement("dd",{className:"col-12 col-md-7"},Ke()(i,e.key)))})),"updating"===(null===(t=null==l?void 0:l.update)||void 0===t?void 0:t.state)?a.a.createElement(r.Fragment,null,a.a.createElement("dt",{className:"col-12 col-md-5"},"Updating firmware"),a.a.createElement("dd",{className:"col-12 col-md-7"},a.a.createElement("div",{className:"progress"},a.a.createElement("div",{className:"progress-bar progress-bar-striped progress-bar-animated",style:{width:l.update.progress+"%"}},l.update.progress,"%")),a.a.createElement("div",null,"Remaining time ",(n=l.update.remaining)?[Math.floor(n/3600),Math.floor(n/60)%60,Math.floor(n%60)].map((function(e){return e<10?"0"+e:e})).filter((function(e,t){return"00"!==e||t>0})).join(":"):"N/A"))):null),a.a.createElement(Ve,{device:i,state:l}))},t}(r.Component),it=Object(U.connect)(["deviceStates"])(ot),lt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ct=function(){return(ct=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},st=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},ut=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSelect=function(e){var n=t.props,r=n.onChange,a=n.devices,o=n.groups,i=void 0===o?[]:o,l=e.target.value;a.has(l)?r(a.get(l),"device"):r(i.find((function(e){return parseInt(l,10)===e.id})),"group")},t}return lt(t,e),t.prototype.render=function(){var e=this.props,t=e.devices,n=e.groups,r=e.value,o=(e.type,e.onChange,st(e,["devices","groups","value","type","onChange"])),i=[a.a.createElement("option",{key:"hidden",hidden:!0},"Select device")],l=[];if(t.forEach((function(e){var t;l.push(a.a.createElement("option",{title:null===(t=e.definition)||void 0===t?void 0:t.description,key:e.ieee_address,value:e.ieee_address},function(e){var t,n;return e.friendly_name+" "+((null===(t=e.definition)||void 0===t?void 0:t.model)?"("+(null===(n=e.definition)||void 0===n?void 0:n.model)+")":"")}(e)))})),n&&n.length){var c=n.map((function(e){return a.a.createElement("option",{key:e.friendly_name,value:e.id},e.friendly_name)}));i.push(a.a.createElement("optgroup",{key:"Groups",label:"Groups"},c)),i.push(a.a.createElement("optgroup",{key:"Devices",label:"Devices"},l))}else i=i.concat(l);return a.a.createElement("select",ct({value:r,onChange:this.onSelect,className:"form-control"},o),i)},t}(r.Component),pt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mt=function(){return(mt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},dt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},ft=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSelect=function(e){(0,t.props.onChange)(e.target.value)},t}return pt(t,e),t.prototype.render=function(){var e=this.props,t=(e.onSelect,e.value),n=e.values,r=e.disabled,o=(e.onChange,dt(e,["onSelect","value","values","disabled","onChange"])),i=1==n.length,l=n.map((function(e){return a.a.createElement("option",{key:e,value:e},e)}));return l.unshift(a.a.createElement("option",{key:"hidded",hidden:!0},"Select endpoint")),a.a.createElement("select",mt({disabled:t&&i||r,value:t,className:"form-control",title:i?"The only endpoint":null,onChange:this.onSelect},o),l)},t}(r.Component),vt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ht=function(){return(ht=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},yt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},gt={genPowerCfg:"PowerCfg",genScenes:"Scenes",genOnOff:"OnOff",genLevelCtrl:"LevelCtrl",lightingColorCtrl:"LColorCtrl",closuresWindowCovering:"Closures",genMultistateInput:"MultistateInput",genGroups:"Groups",genOta:"Ota",touchlink:"Touchlink",genIdentify:"Identify",msTemperatureMeasurement:"Temperature",msIlluminanceMeasurement:"Illuminance",msRelativeHumidity:"Humidity",msPressureMeasurement:"Pressure",msSoilMoisture:"Soil Moisture"};function bt(e){return"string"!=typeof e[0]}!function(e){e[e.MULTIPLE=0]="MULTIPLE",e[e.SINGLE=1]="SINGLE"}(B||(B={}));var Et,Ot=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={pickerId:b(5)},t.onChange=function(e){var n=t.props,r=n.onChange,a=n.pickerType,o=t.props.value,i=e.target.name;a===B.MULTIPLE?e.target.checked?o.push(i):o=o.filter((function(e){return e!==i})):o=e.target.value;r(o)},t}return vt(t,e),t.prototype.render=function(){return this.props.pickerType===B.MULTIPLE?this.renderMultiPicker():this.renderSinglePicker()},t.prototype.renderMultiPicker=function(){var e=this,t=this.state.pickerId,n=this.props,r=n.clusters,o=n.value,i=(n.pickerType,n.onChange,yt(n,["clusters","value","pickerType","onChange"])),l=[];return bt(r)?console.warn("Not implemented"):l=r.map((function(n){var r;return a.a.createElement("div",{key:n,className:"form-check form-check-inline"},a.a.createElement("input",ht({className:"form-check-input",type:"checkbox",checked:o.includes(n),name:n,id:t+"_"+n,value:n,onChange:e.onChange},i)),a.a.createElement("label",{className:"form-check-label",htmlFor:t+"_"+n,title:n},null!==(r=gt[n])&&void 0!==r?r:n))})),l},t.prototype.renderSinglePicker=function(){var e=this.props,t=e.clusters,n=(e.onChange,e.pickerType,yt(e,["clusters","onChange","pickerType"])),r=[a.a.createElement("option",{key:"hidden",hidden:!0},"Select cluster")];return bt(t)?t.forEach((function(e){var t=e.clusters.map((function(e){var t;return a.a.createElement("option",{key:e,value:e},null!==(t=gt[e])&&void 0!==t?t:e)}));0===t.length&&t.push(a.a.createElement("option",{key:"none",disabled:!0},"None")),r.push(a.a.createElement("optgroup",{key:e.name,label:e.name},t))})):t.forEach((function(e){var t;r.push(a.a.createElement("option",{key:e,value:e},null!==(t=gt[e])&&void 0!==t?t:e))})),a.a.createElement("select",ht({className:"form-select",onChange:this.onChange},n),r)},t.defaultProps={clusters:[]},t}(r.Component),_t=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={stateRule:null},t.setSourceEp=function(e){var n=t.state.stateRule;n.source.endpoint=e,t.setState({stateRule:n})},t.setDestination=function(e,n){var r=t.state.stateRule;if("device"===n){var a=C(e);r.target.ieee_address=e.ieee_address,r.target.type="endpoint",r.target.endpoint=a[0],delete r.target.id}else"group"===n&&(r.target.id=e.id,r.target.type="group",delete r.target.ieee_address);r.clusters=[],t.setState({stateRule:r})},t.setDestinationEp=function(e){var n=t.state.stateRule;n.target.endpoint=e,n.clusters=[],t.setState({stateRule:n})},t.setClusters=function(e){var n=t.state.stateRule;n.clusters=e,t.setState({stateRule:n})},t.onBindOrUnBindClick=function(e){var n=t.props,r=n.onUnBind,a=n.onBind,o=t.getBidningParams(),i=o.from,l=o.to,c=o.clusters;"Bind"==e?a(i,l,c):r(i,l,c)},t}return _t(t,e),t.getDerivedStateFromProps=function(e,t){return{stateRule:e.rule}},t.prototype.getBidningParams=function(){var e,t=this.props,n=t.device,r=t.groups,a=t.devices,o=this.state.stateRule,i=n.friendly_name+"/"+o.source.endpoint;if("group"===o.target.type)e=""+r.find((function(e){return e.id===o.target.id})).friendly_name;else if("endpoint"===o.target.type){var l=a.get(o.target.ieee_address);e="Coordinator"===l.type?""+l.friendly_name:l.friendly_name+"/"+o.target.endpoint}return{from:i,to:e,clusters:o.clusters}},t.prototype.isValidRule=function(){var e=this.state.stateRule,t=!1;return"endpoint"==e.target.type?t=e.source.endpoint&&e.target.ieee_address&&e.target.endpoint&&e.clusters.length>0:"group"==e.target.type&&(t=e.source.endpoint&&e.target.id&&e.clusters.length>0),t},t.prototype.render=function(){var e=this.props,t=e.devices,n=e.groups,r=e.idx,o=e.device,i=this.state.stateRule,l="endpoint"===i.target.type?"device":"group",c=C(o),s=function(e,t,n){return"group"===e.target.type?n.find((function(t){return t.id===e.target.id})):t.get(e.target.ieee_address)}(i,t,n),u=C(s),p=new Set(i.clusters),m=o.endpoints.get(i.source.endpoint);return m&&m.clusters.output.forEach((function(e){return p.add(e)})),a.a.createElement("tr",null,a.a.createElement("th",{scope:"row"},r+1),a.a.createElement("td",null,a.a.createElement(ft,{disabled:!i.isNew,values:c,value:i.source.endpoint,onChange:this.setSourceEp})),a.a.createElement("td",null,a.a.createElement(ut,{disabled:!i.isNew,type:l,value:i.target.ieee_address||i.target.id,devices:t,groups:n,onChange:this.setDestination})),a.a.createElement("td",null,"endpoint"===i.target.type?a.a.createElement(ft,{disabled:!i.isNew,values:u,value:i.target.endpoint,onChange:this.setDestinationEp}):null),a.a.createElement("td",null,a.a.createElement(Ot,{pickerType:B.MULTIPLE,clusters:Array.from(p),value:i.clusters,onChange:this.setClusters})),a.a.createElement("td",null,a.a.createElement("div",{className:"btn-group btn-group-sm"},a.a.createElement(se,{item:"Bind",disabled:!this.isValidRule(),title:"Bind",className:"btn btn-primary",onClick:this.onBindOrUnBindClick},a.a.createElement("i",{className:"fa fa-heart"})),a.a.createElement(se,{item:"Unbind",disabled:!i.isNew&&!this.isValidRule(),title:"Unbind",className:"btn btn-secondary",onClick:this.onBindOrUnBindClick},a.a.createElement("i",{className:"fa fa-heart-broken"})))))},t}(r.Component),Nt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wt=function(e){return""+e.isNew+e.source.ieee_address+"-"+e.target.id+"-"+e.target.ieee_address+"-"+e.clusters.join("-")},Ct=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={bidingRules:[]},t.onBindClick=function(e,n,r){(0,t.props.addBind)(e,n,r)},t.onUnBindClick=function(e,n,r){(0,t.props.removeBind)(e,n,r)},t}return Nt(t,e),t.getDerivedStateFromProps=function(e,t){var n=e.device,r=C(n),a=function(e){var t={};return e.endpoints.forEach((function(n,r){n.bindings.forEach((function(n){var a,o=null!==(a=n.target.id)&&void 0!==a?a:n.target.ieee_address;t[o]?t[o].clusters.push(n.cluster):t[o]={source:{ieee_address:e.ieee_address,endpoint:r},target:n.target,clusters:[n.cluster]}}))})),Object.values(t)}(n);return a.push({isNew:Date.now(),target:{},source:{ieee_address:n.ieee_address,endpoint:r[0]},clusters:[]}),{bidingRules:a}},t.prototype.render=function(){var e=this,t=this.props,n=t.device,r=t.devices,o=t.groups,i=this.state.bidingRules;return a.a.createElement("div",{className:"table-responsive"},a.a.createElement("table",{className:"table"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{scope:"col"},"#"),a.a.createElement("th",{scope:"col"},"Source EP"),a.a.createElement("th",{scope:"col"},"Destination"),a.a.createElement("th",{scope:"col"},"Destination EP"),a.a.createElement("th",{scope:"col"},"Clusters"),a.a.createElement("th",{scope:"col"},"Actions"))),a.a.createElement("tbody",null,i.map((function(t,i){return a.a.createElement(kt,{key:wt(t),rule:t,groups:o,onUnBind:e.onUnBindClick,onBind:e.onBindClick,device:n,idx:i,devices:r})})))))},t}(r.Component),jt=Object(U.connect)(["devices","groups"],oe)(Ct),St=n("6pAV"),Pt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xt=function(){return(xt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},At=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Rt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChange=function(e){(0,t.props.onChange)(e.target.value)},t}return Pt(t,e),t.prototype.render=function(){var e=this.props,t=e.cluster,n=(e.onChange,At(e,["cluster","onChange"])),r=[],o=St.Zcl.Cluster[t];o&&(r=Object.keys(o.attributes));var i=r.map((function(e){return a.a.createElement("option",{key:e,value:e},e)}));return i.unshift(a.a.createElement("option",{key:"none",hidden:!0},"Select attribute")),a.a.createElement("select",xt({disabled:0===r.length,className:"form-select",onChange:this.onChange},n),i)},t}(r.Component),It=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dt=function(e,t){var n=Object.keys(St.Zcl.Cluster),r=[],a=e.endpoints.get(t);return a&&(r=r.concat(a.clusters.output),n=n.filter((function(e){return!r.includes(e)}))),[{name:"Avaliable",clusters:r},{name:"Possible",clusters:n}]},Mt=["maximum_report_interval","minimum_report_interval","reportable_change","endpoint","cluster","attribute"],Tt=function(e){return Mt.every((function(t){return void 0!==e[t]}))},Lt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={stateRule:{}},t.setSourceEp=function(e){var n=t.state.stateRule;n.endpoint=e,t.setState({stateRule:n})},t.setCluster=function(e){var n=t.state.stateRule;n.cluster=e,t.setState({stateRule:n})},t.setAttribute=function(e){var n=t.state.stateRule;n.attribute=e,t.setState({stateRule:n})},t.changeHandler=function(e){var n=t.state.stateRule,r=e.target,a=r.name,o=r.value;n[a]=o,t.setState({stateRule:n})},t.applyRule=function(){(0,t.props.onApply)(t.state.stateRule)},t}return It(t,e),t.getDerivedStateFromProps=function(e,t){return{stateRule:e.rule}},t.prototype.render=function(){var e=this.props,t=e.rule,n=e.idx,r=e.device,o=this.state.stateRule,i=C(r);return a.a.createElement("tr",null,a.a.createElement("th",{scope:"row"},n+1),a.a.createElement("td",null,a.a.createElement(ft,{disabled:!t.isNew,values:i,value:o.endpoint,onChange:this.setSourceEp})),a.a.createElement("td",null,a.a.createElement(Ot,{disabled:!o.endpoint,pickerType:B.SINGLE,clusters:Dt(r,o.endpoint),value:o.cluster,onChange:this.setCluster})),a.a.createElement("td",null,a.a.createElement(Rt,{value:o.attribute,cluster:o.cluster,onChange:this.setAttribute})),a.a.createElement("td",null,a.a.createElement("input",{onChange:this.changeHandler,value:o.minimum_report_interval,required:!0,type:"number",name:"minimum_report_interval",className:"form-control"})),a.a.createElement("td",null,a.a.createElement("input",{onChange:this.changeHandler,value:o.maximum_report_interval,required:!0,type:"number",name:"maximum_report_interval",className:"form-control"})),a.a.createElement("td",null,a.a.createElement("input",{placeholder:"Enter 65535 to disable reporting",onChange:this.changeHandler,value:o.reportable_change,required:!0,type:"number",name:"reportable_change",className:"form-control"})),a.a.createElement("td",null,a.a.createElement(se,{disabled:!Tt(o),className:"btn btn-primary",onClick:this.applyRule},"Apply")))},t}(r.Component),Ft=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gt=function(){return(Gt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Bt=function(e){return""+e.isNew+e.cluster+"-"+e.attribute},Ut=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={bidingRules:[]},t.onReportingClick=function(e,t,n){},t.onUnReportingClick=function(e,t,n){},t.onApply=function(e){var n=t.props,r=n.configureReport,a=n.device,o=e.cluster,i=e.endpoint,l=e.attribute,c=e.minimum_report_interval,s=e.maximum_report_interval,u=e.reportable_change;r(a.friendly_name+"/"+i,{cluster:o,attribute:l,minimum_report_interval:c,maximum_report_interval:s,reportable_change:u})},t}return Ft(t,e),t.getDerivedStateFromProps=function(e,t){var n=function(e){var t=[];return e.endpoints.forEach((function(e,n){e.configured_reportings.forEach((function(e){t.push(Gt(Gt({},e),{endpoint:n}))}))})),t}(e.device);return n.push({isNew:Date.now(),reportable_change:0,minimum_report_interval:60,maximum_report_interval:3600}),{bidingRules:n}},t.prototype.render=function(){var e=this,t=this.props.device,n=this.state.bidingRules;return a.a.createElement("div",{className:"table-responsive"},a.a.createElement("table",{className:"table"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{scope:"col"},"#"),a.a.createElement("th",{scope:"col"},"Endpoint"),a.a.createElement("th",{scope:"col"},"Cluster"),a.a.createElement("th",{scope:"col"},"Attribute"),a.a.createElement("th",{scope:"col"},"Min rep interval"),a.a.createElement("th",{scope:"col"},"Max rep interval"),a.a.createElement("th",{scope:"col"},"Min rep change"),a.a.createElement("th",{scope:"col"}," "))),a.a.createElement("tbody",null,n.map((function(n,r){return a.a.createElement(Lt,{idx:r,key:Bt(n),rule:n,device:t,onApply:e.onApply})})))))},t}(r.Component),qt=Object(U.connect)(["devices","groups"],oe)(Ut),Jt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setStateValue=function(e,n){var r=t.props;(0,r.setStateValue)(r.device.friendly_name,e,n)},t}return Jt(t,e),t.prototype.render=function(){var e,t=this.props,n=t.device,r=null!==(e=t.deviceStates.get(n.friendly_name))&&void 0!==e?e:{};return a.a.createElement("pre",null,JSON.stringify(r,null,4))},t}(r.Component),Ht=Object(U.connect)(["deviceStates"],oe)(Vt);function Wt(e){return"binary"===e.type}function zt(e){return"numeric"===e.type}function Kt(e){return"text"===e.type}function Zt(e){return"enum"===e.type}function Qt(e){return"light"===e.type}function Yt(e){return"switch"===e.type}function Xt(e){return"cover"===e.type}function $t(e){return"lock"===e.type}function en(e){return"composite"===e.type&&"color_xy"!==e.name&&"color_hs"!==e.name}function tn(e){return"composite"===e.type&&("color_xy"==e.name||"color_hs"==e.name)}function nn(e){return"climate"===e.type}function rn(e){return["number","string"].includes(typeof e)}!function(e){e[e.NONE=0]="NONE",e[e.ACCESS_STATE=1]="ACCESS_STATE",e[e.ACCESS_WRITE=2]="ACCESS_WRITE",e[e.ACCESS_READ=4]="ACCESS_READ"}(Et||(Et={}));var an=function(e){var t=e.onChange,n=e.values,r=e.value;return a.a.createElement("div",{className:"btn-group mr-2"},n.map((function(e){return a.a.createElement(se,{className:l()("btn btn-outline-secondary",{active:rn(e)?e===r:e.value==(rn(r)?r:null==r?void 0:r.value)}),onClick:function(e){return t(e)},key:rn(e)?e:e.title,item:rn(e)?e:e.value},rn(e)?e:e.title)})))},on=function(){return(on=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},ln=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},cn=function(e){var t=e.onChange,n=e.value,o=e.min,i=e.max,c=e.unit,s=e.steps,u=ln(e,["onChange","value","min","max","unit","steps"]),p=Object(r.useState)(b(5)),m=p[0],d=(p[1],Object(r.useState)(n)),f=d[0],v=d[1];Object(r.useEffect)((function(){v(n)}),[n]);var h=void 0!==o&&void 0!==i;return a.a.createElement("div",{className:"input-group align-items-center"},s?a.a.createElement(an,{values:s,onChange:t}):null,h?a.a.createElement("input",on({id:m,min:o,max:i,type:"range",className:"form-range form-control border-0",value:f,onChange:function(e){return v(e.target.valueAsNumber)},onMouseUp:function(){return t(f)}},u)):null,a.a.createElement("input",on({type:"number",className:l()("form-control",{"ms-1":h}),value:f,onChange:function(e){return v(e.target.valueAsNumber)},onBlur:function(){return t(f)}},u,{style:h?{maxWidth:"100px"}:null})),c?a.a.createElement("span",{className:"input-group-text",style:{minWidth:"66px"}},c):null)};function sn(e){var t=e.value;switch(typeof t){case"boolean":return a.a.createElement(a.a.Fragment,null,t?"true":"false");case"undefined":return a.a.createElement(a.a.Fragment,null,"N/A");case"object":return a.a.createElement(a.a.Fragment,null,null===t?"null":JSON.stringify(t));case"string":return a.a.createElement(a.a.Fragment,null,""===t?a.a.createElement("small",{className:"text-muted"},"empty string"):t);default:return a.a.createElement(a.a.Fragment,null,JSON.stringify(t))}}var un=function(e){var t=e.feature,n=t.property,o=t.unit,i=e.deviceState;return a.a.createElement(r.Fragment,null,a.a.createElement("strong",null,a.a.createElement(sn,{value:i[n]})),o?a.a.createElement("small",{className:"text-muted ms-1"},o):null)},pn=function(e){var t=e.feature.access;return a.a.createElement("div",{className:"alert alert-warning p-0",role:"alert"},"Unknown acces ",JSON.stringify(t,null,4))},mn=function(){return(mn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},dn=function(e){var t,n=e.feature,r=n.access,o=n.endpoint,i=n.name,l=n.property,c=n.unit,s=n.value_max,u=n.value_min,p=e.deviceState,m=e.steps,d=e.onChange;return r&Et.ACCESS_WRITE?a.a.createElement(cn,{onChange:function(e){var t;return d(o,((t={})[i]=e,t))},value:null!==(t=p[l])&&void 0!==t?t:0,min:u,max:s,steps:m,unit:c}):r&Et.ACCESS_STATE?a.a.createElement(un,mn({},e)):a.a.createElement(pn,mn({},e))},fn=function(e){var t=e.onChange,n=e.value,o=e.label,i=e.valueOn,l=e.valueOff,c=Object(r.useState)(b(5)),s=c[0],u=(c[1],null!=n);return a.a.createElement(r.Fragment,null,a.a.createElement(se,{className:"btn btn-link ps-0",item:l,onClick:function(e){return t(e)}},a.a.createElement(sn,{value:l})),u?a.a.createElement("div",{className:"form-check form-switch d-inline-block"},a.a.createElement("input",{className:"form-check-input",type:"checkbox",id:s,checked:n===i,onChange:function(e){return t(e.target.checked?i:l)}}),o?a.a.createElement("label",{className:"form-check-label",htmlFor:s},o):null):a.a.createElement("i",{className:"fa fa-question",title:"Current value unknown"}),a.a.createElement(se,{className:"btn btn-link",item:i,onClick:function(e){return t(e)}},a.a.createElement(sn,{value:i})))},vn=function(){return(vn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},hn=function(e){var t=e.feature,n=t.access,r=t.endpoint,o=(t.name,t.property),i=t.value_off,l=t.value_on,c=e.deviceState,s=e.onChange;return n&Et.ACCESS_WRITE?a.a.createElement(fn,{onChange:function(e){var t;return s(r,((t={})[o]=e,t))},value:c[o],valueOn:l,valueOff:i}):n&Et.ACCESS_STATE?a.a.createElement(un,vn({},e)):a.a.createElement(pn,vn({},e))},yn=function(){return(yn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},gn=function(e){var t=e.onChange,n=e.feature,r=n.access,o=n.name,i=n.values,l=n.endpoint,c=n.property,s=e.deviceState;return r&Et.ACCESS_WRITE?a.a.createElement(an,{onChange:function(e){var n;return t(l,((n={})[o]=e,n))},values:i,value:s[c]}):r&Et.ACCESS_STATE?a.a.createElement(un,yn({},e)):a.a.createElement(pn,yn({},e))},bn=function(){return(bn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},En={brightness:[0,25,50,75,100].map((function(e){return{value:(t=e,n=[0,100],r=[0,255],a=r[0],o=r[1],i=n[0],(t-i)/(n[1]-i)*(o-a)+a),title:e+"%"};var t,n,r,a,o,i})),color_temp:[1e3,2e3,3e3,4e3,5e3,6500].map((function(e){return{value:1e6/e,title:e+"K"}}))},On=function(e){return a.a.createElement(Zn,bn({type:"light"},e,{stepsConfiguration:En}))},_n=function(){return(_n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},kn=function(e){return a.a.createElement(Zn,_n({type:"switch"},e))},Nn=function(){return(Nn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},wn={position:[0,25,50,75,100].map((function(e){return{value:e,title:e+""}})),tilt:[0,25,50,75,100].map((function(e){return{value:e,title:e+""}}))},Cn=function(e){return a.a.createElement(Zn,Nn({type:"cover"},e,{stepsConfiguration:wn}))},jn=function(){return(jn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Sn=function(e){return a.a.createElement(Zn,jn({type:"lock"},e))},Pn=n("uxXc"),xn=function(){return(xn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},An=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Rn=function(e,t){switch(t){case"color_xy":var n=e,r=n.x,a=n.y,o=1/a*r,i=1/a*(1-r-a);return"#"+Pn.xyz.hex([100*o,100,100*i]);case"color_hs":var l=e,c=l.hue,s=l.saturation;return"#"+Pn.hsv.hex([c,s,100]);default:return"#FFFFFF"}},In=function(e,t){switch(t){case"color_hs":var n=Pn.hex.hsv(e),r=n[0],a=n[1];n[2];return{hue:r,saturation:a};case"color_xy":var o=Pn.hex.xyz(e),i=o[0],l=o[1],c=o[2];return{x:i/(i+l+c),y:l/(i+l+c)};default:return{hex:e}}},Dn=["#FF0018","#FFA52C","#FFFF41","#008018","#0000F9","#86007D"],Mn=function(e){var t=e.onChange,n=e.value,o=void 0===n?{}:n,i=e.format,l=e.steps,c=void 0===l?Dn:l,s=An(e,["onChange","value","format","steps"]),u=Object(r.useState)(Rn(o,i)),p=u[0],m=u[1];return Object(r.useEffect)((function(){m(Rn(o,i))}),[o,i]),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"btn-group mr-2"},c.map((function(e){return a.a.createElement(se,{className:"btn",style:{backgroundColor:e},key:e,item:e,title:e,onClick:function(e){return t(In(e,i))}},"   ")}))),a.a.createElement("input",xn({type:"color",className:"form-control form-control-color",value:p,onChange:function(e){t(In(e.target.value,i))}},s)))},Tn=function(e){for(var t,n,r=e.deviceState,o=e.feature,i=e.onChange,l={},c=0,s=o.features;c<s.length;c++){var u=s[c];l[u.name]=null!==(n=null===(t=r[o.property])||void 0===t?void 0:t[u.property])&&void 0!==n?n:0}return a.a.createElement(Mn,{onChange:function(e){return i(o.endpoint,{color:e})},value:l,format:o.name})},Ln=function(){return(Ln=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Fn=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Gn=function(e){var t=e.onChange,n=e.value,o=e.unit,i=Fn(e,["onChange","value","unit"]),l=Object(r.useState)(n),c=l[0],s=l[1];return Object(r.useEffect)((function(){s(n)}),[n]),a.a.createElement(r.Fragment,null,a.a.createElement("input",Ln({type:"text",className:"form-control",value:c,onChange:function(e){return s(e.target.value)},onBlur:function(){return t(c)}},i)),o?a.a.createElement("span",{className:"input-group-text",style:{minWidth:"66px"}},o):null)},Bn=function(){return(Bn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Un=function(e){var t,n=e.feature,r=n.access,o=n.endpoint,i=n.name,l=n.property,c=e.deviceState,s=e.onChange;return r&Et.ACCESS_WRITE?a.a.createElement(Gn,{onChange:function(e){var t;return s(o,((t={})[i]=e,t))},value:null!==(t=c[l])&&void 0!==t?t:""}):r&Et.ACCESS_STATE?a.a.createElement(un,Bn({},e)):a.a.createElement(pn,Bn({},e))},qn=n("bt/X"),Jn=n.n(qn),Vn=function(){return(Vn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Hn=function(e){return a.a.createElement(Zn,Vn({type:"climate"},e))},Wn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zn=function(){return(zn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Kn=function(e){var t,n=e.children,r=e.feature,o=e.onRead,i=null===(t=r.name)||void 0===t?void 0:t.startsWith("color_"),l=r.access&Et.ACCESS_READ||i;return a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-12 col-md-3"},a.a.createElement("label",{className:"col-form-label"},a.a.createElement("div",null,a.a.createElement("strong",{title:JSON.stringify(r)},r.name),l?a.a.createElement(se,{item:r,onClick:function(e){var t;o(r.endpoint,((t={})[e.property]="",t))},className:"btn btn-primaty"},a.a.createElement("i",{className:"fa fa-sync"})):null),r.description?a.a.createElement("small",{className:"d-block text-muted"},r.description):null)),a.a.createElement("div",{className:"col-12 col-md-9 d-flex align-items-center"},n))},Zn=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={},n.onChange=function(e,t){var r=n.props,a=r.onChange;en(r.feature)?n.setState(t):a(e,t)},n.onApplyClick=function(){var e,t=n.props,r=t.onChange,a=t.feature,o=a.endpoint,i=a.property;r(o,i?((e={})[i]=n.state,e):n.state)},n.onRead=function(e,t){var r,a=n.props,o=a.onRead,i=a.feature;en(i)?o(e,((r={})[i.property]=t,r)):o(e,t)},n.renderFeature=function(e){var r=n.props,o=r.deviceState,i=r.device,l=r.stepsConfiguration,c={key:JSON.stringify(e),device:i,deviceState:o,onChange:n.onChange,onRead:n.onRead},s={key:JSON.stringify(e),feature:e,onRead:n.onRead};return Wt(e)?a.a.createElement(Kn,zn({},s),a.a.createElement(hn,zn({feature:e},c))):zt(e)?a.a.createElement(Kn,zn({},s),a.a.createElement(dn,zn({feature:e},c,{steps:null==l?void 0:l[e.name]}))):Kt(e)?a.a.createElement(Kn,zn({},s),a.a.createElement(Un,zn({feature:e},c))):Zt(e)?a.a.createElement(Kn,zn({},s),a.a.createElement(gn,zn({feature:e},c))):Qt(e)?a.a.createElement(On,zn({feature:e},c)):Yt(e)?a.a.createElement(kn,zn({feature:e},c)):Xt(e)?a.a.createElement(Cn,zn({feature:e},c)):$t(e)?a.a.createElement(Sn,zn({feature:e},c)):tn(e)?a.a.createElement(Kn,zn({},s),a.a.createElement(Tn,zn({feature:e},c))):nn(e)?a.a.createElement(Hn,zn({feature:e},c)):en(e)?a.a.createElement(Kn,zn({},s),a.a.createElement("div",{className:"row"},a.a.createElement(t,zn({type:"composite",feature:e},c)))):a.a.createElement(Kn,zn({},s),a.a.createElement("pre",null,JSON.stringify(e,null,4)))},n}return Wn(t,e),t.prototype.render=function(){var e=this.props.feature,t=e.features,n=Jn()(t,(function(e){var t;return null!==(t=e.endpoint)&&void 0!==t?t:"MAGIC_NO_ENDPOINT"})),r=[];for(var o in n.MAGIC_NO_ENDPOINT&&(r.push.apply(r,n.MAGIC_NO_ENDPOINT.map(this.renderFeature)),delete n.MAGIC_NO_ENDPOINT),n){var i=n[o];r.push(a.a.createElement("div",{key:o},"Endpoint: ",o,a.a.createElement("div",{className:"ps-4"},i.map(this.renderFeature))))}return en(e)&&r.push(a.a.createElement("div",{key:e.name},a.a.createElement(se,{className:"btn btn-primary float-right",onClick:this.onApplyClick},"Apply"))),r},t}(r.Component),Qn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qn(t,e),t.prototype.render=function(){var e,t,n=this.props,r=n.device,o=n.deviceStates,i=n.setDeviceState,l=n.getDeviceState,c=null!==(e=o.get(r.friendly_name))&&void 0!==e?e:{};return(null===(t=r.definition)||void 0===t?void 0:t.exposes)?a.a.createElement(Zn,{feature:{features:r.definition.exposes},type:"composite",device:r,deviceState:c,onChange:function(e,t){i(r.friendly_name+(e?"/"+e:""),t)},onRead:function(e,t){l(r.friendly_name+(e?"/"+e:""),t)}}):"Device doesn't expose anything"},t}(r.Component),Xn=Object(U.connect)(["deviceStates"],oe)(Yn),$n="_1A0umx4fPj4iWC5K7RUnD-",er=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tr=function(e){var t=e.label,n=e.clusters;return n.length?a.a.createElement("li",null,a.a.createElement("span",null,t),a.a.createElement("ul",null,n.map((function(e){return a.a.createElement("li",{key:e},a.a.createElement("span",null,e))})))):null},nr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return er(t,e),t.prototype.render=function(){var e=this.props.device;return a.a.createElement("dl",{className:$n+" row"},a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("span",null,e.ieee_address),a.a.createElement("ul",null,Array.from(e.endpoints.entries()).map((function(e){var t=e[0],n=e[1];return a.a.createElement("li",{key:t},a.a.createElement("span",null,"Endpoint ",a.a.createElement("strong",null,t)),a.a.createElement("ul",null,a.a.createElement(tr,{label:"Output clusters",clusters:n.clusters.output}),a.a.createElement(tr,{label:"Input clusters",clusters:n.clusters.input})))}))))))},t}(r.Component),rr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ar=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return rr(t,e),t.prototype.renderContent=function(){var e=this.props,t=e.match,n=e.devices,r=t.params,o=r.tab,i=r.dev,l=n.get(i);switch(o){case"info":return a.a.createElement(it,{device:l});case"bind":return a.a.createElement(jt,{device:l});case"state":return a.a.createElement(Ht,{device:l});case"exposes":return a.a.createElement(Xn,{device:l});case"clusters":return a.a.createElement(nr,{device:l});case"reporting":return a.a.createElement(qt,{device:l});default:return a.a.createElement(De.a,{to:"/device/"+i+"/info"})}},t.prototype.render=function(){var e=this.props,t=e.devices,n=e.match.params.dev,r=t.get(n);return r?a.a.createElement("div",{className:""},a.a.createElement("h3",null,r.friendly_name),a.a.createElement("ul",{className:"nav nav-tabs"},a.a.createElement("li",{className:"nav-item"},a.a.createElement(Ie.c,{activeClassName:"active",className:"nav-link "+We,to:"/device/"+n+"/info"},"About")),a.a.createElement("li",{className:"nav-item"},a.a.createElement(Ie.c,{activeClassName:"active",className:"nav-link "+We,to:"/device/"+n+"/bind"},"Bind")),a.a.createElement("li",{className:"nav-item"},a.a.createElement(Ie.c,{activeClassName:"active",className:"nav-link "+We,to:"/device/"+n+"/reporting"},"Reporting")),a.a.createElement("li",{className:"nav-item"},a.a.createElement(Ie.c,{activeClassName:"active",className:"nav-link "+We,to:"/device/"+n+"/state"},"State")),a.a.createElement("li",{className:"nav-item"},a.a.createElement(Ie.c,{activeClassName:"active",className:"nav-link "+We,to:"/device/"+n+"/exposes"},"Exposes")),a.a.createElement("li",{className:"nav-item"},a.a.createElement(Ie.c,{activeClassName:"active",className:"nav-link "+We,to:"/device/"+n+"/clusters"},"Clusters"))),a.a.createElement("div",{className:"tab-content"},a.a.createElement("div",{className:"tab-pane fade show active container"},this.renderContent()))):a.a.createElement("div",{className:"h-100 d-flex justify-content-center align-items-center"},"Unknown device")},t}(r.Component),or=Object(De.g)(ar),ir=Object(U.connect)(["devices"],oe)(or),lr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),cr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onIdentifyClick=function(e){(0,t.props.touchlinkIdentify)(e)},t.onResetClick=function(e){(0,t.props.touchlinkReset)(e)},t}return lr(t,e),t.prototype.renderTouchlinkDevices=function(){var e=this,t=this.props,n=t.touchlinkDevices,r=t.devices,o=t.touchlinkIdentifyInProgress,i=t.touchlinkResetInProgress,c=o||i;return a.a.createElement("div",{className:"table-responsive"},a.a.createElement("table",{className:"table align-middle"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{scope:"col"},"#"),a.a.createElement("th",{scope:"col"},"ieee_address"),a.a.createElement("th",{scope:"col"},"friendly_name"),a.a.createElement("th",{scope:"col"},"channel"),a.a.createElement("th",{scope:"col"}," "))),a.a.createElement("tbody",null,n.map((function(t,n){var s;return a.a.createElement("tr",{key:t.ieee_address},a.a.createElement("td",null,n+1),a.a.createElement("td",null,r.has(t.ieee_address)?a.a.createElement(Ie.b,{to:y(t.ieee_address)},t.ieee_address):t.ieee_address),a.a.createElement("td",null,null===(s=r.get(t.ieee_address))||void 0===s?void 0:s.friendly_name),a.a.createElement("td",null,t.channel),a.a.createElement("td",null,a.a.createElement("div",{className:"btn-group float-right",role:"group","aria-label":"Basic example"},a.a.createElement(se,{disabled:c,item:t,title:"Identify",className:"btn btn-primary",onClick:e.onIdentifyClick},a.a.createElement("i",{className:l()("fa",{"fa-exclamation-triangle":!o,"fas fa-circle-notch fa-spin":o})})),a.a.createElement(se,{disabled:c,item:t,title:"Factory reset",className:"btn btn-danger",onClick:e.onResetClick},a.a.createElement("i",{className:l()("fa",{"fa-broom":!i,"fas fa-circle-notch fa-spin":i})})))))})))))},t.prototype.renderNoDevices=function(){var e=this.props.touchlinkScan;return a.a.createElement(se,{className:"btn btn-primary mx-auto d-block",onClick:e},"Scan")},t.prototype.render=function(){var e=this.props,t=e.touchlinkDevices,n=e.touchlinkScanInProgress,r=e.touchlinkScan;return a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"card mt-2"},a.a.createElement("div",{className:"card-header allign-middle"},"Detected ",t.length," touchlink devices.",a.a.createElement(se,{title:"Rescan",className:"btn btn-primary btn-sm float-right",onClick:r},a.a.createElement("i",{className:"fa fa-sync"}))),a.a.createElement("div",null,a.a.createElement("div",{className:"card-body"},n?a.a.createElement("div",{className:"d-flex justify-content-center"},a.a.createElement("div",{className:"spinner-border",role:"status"},a.a.createElement("span",{className:"sr-only"},"Loading..."))):0===t.length?this.renderNoDevices():this.renderTouchlinkDevices()))))},t}(r.Component),sr=Object(U.connect)(["touchlinkDevices","devices","touchlinkScanInProgress","touchlinkIdentifyInProgress","touchlinkResetInProgress"],oe)(cr),ur=function(){return(ur=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},pr=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},mr=new Map([["ON","OFF"],["OFF","ON"],["OPEN","CLOSE"],["CLOSE","OPEN"],["LOCK","UNLOCK"],["UNLOCK","LOCK"],[!0,!1],[!1,!0]]),dr=function(e){var t=e.onChange,n=e.value,o=pr(e,["onChange","value"]),i=Object(r.useState)(n),l=i[0],c=i[1];return Object(r.useEffect)((function(){c(n)}),[n]),a.a.createElement("input",ur({value:l,onBlur:function(){return t({target:{value:l}})},onChange:function(e){return c(e.target.value)}},o))},fr=function(e){var t=e.value,n=e.values,r=e.onChange,o=e.disabled,i=(e.name,pr(e,["value","values","onChange","disabled","name"])),l=mr.has(t);if(n)return a.a.createElement("select",{className:"form-select",disabled:o,value:t,onChange:function(e){return r(e.target.value)}},n.map((function(e){return a.a.createElement("option",{key:e,value:e},e)})));switch(typeof t){case"boolean":return a.a.createElement("div",{className:"form-check form-switch"},a.a.createElement("input",ur({type:"checkbox",className:"form-check-input",disabled:o,checked:t,onChange:function(e){return r(e.target.checked)}},i)));case"number":return a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-9"},a.a.createElement(cn,ur({disabled:o,value:t,onChange:function(e){return r(e)}},i))),a.a.createElement("div",{className:"col-3"},a.a.createElement("input",ur({type:"number",step:"any",className:"form-control col-2",disabled:o,value:t,onChange:function(e){return r(e.target.valueAsNumber)}},i))));default:return l?a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-3"},a.a.createElement(se,{title:"Toggle",value:"Toggle",className:"btn btn-primary",disabled:o,item:mr.get(t),onClick:function(e){return r(e)}},a.a.createElement("i",{className:"fa fa-exchange-alt"}))),a.a.createElement("div",{className:"col-9"},a.a.createElement(dr,ur({type:"text",className:"form-control",disabled:o,value:t,onChange:function(e){return r(e.target.value)}},i)))):a.a.createElement(dr,ur({type:"text",className:"form-control",disabled:o,value:t,onChange:function(e){return r(e.target.value)}},i))}},vr=n("E+oP"),hr=n.n(vr),yr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gr=[{key:"last_seen",path:"config.advanced.last_seen",title:"Last seen",description:"Add a last_seen attribute to MQTT messages, contains date/time of last Zigbee message",values:["disable","ISO_8601","ISO_8601_local","epoch"]},{key:"elapsed",path:"config.advanced.elapsed",title:"Elapsed",description:"Add an elapsed attribute to MQTT messages, contains milliseconds since the previous msg"},{key:"log_level",path:"log_level",title:"Log level",description:"Logging level",values:["debug","info","warn","error"]},{key:"homeassistant",path:"config.homeassistant",title:"Homeassistant support",description:"Home Assistant integration (MQTT discovery)"}],br=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.updateConfig=function(e,n){(0,t.props.updateConfigValue)(e,n)},t}return yr(t,e),t.prototype.render=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("ul",{className:"nav nav-tabs"},a.a.createElement("li",{className:"nav-item"},a.a.createElement(Ie.c,{className:"nav-link",activeClassName:"active",to:"/settings/settings"},"Settings")),a.a.createElement("li",{className:"nav-item"},a.a.createElement(Ie.c,{className:"nav-link",activeClassName:"active",to:"/settings/bridge"},"Raw")),a.a.createElement("li",{className:"nav-item"},a.a.createElement(Ie.c,{className:"nav-link",activeClassName:"active",to:"/settings/about"},"About"))),a.a.createElement("div",{className:"tab-content"},a.a.createElement("div",{className:"tab-pane fade show active"},a.a.createElement("div",{className:"container"},this.renderSwitcher()))))},t.prototype.renderSwitcher=function(){switch(this.props.match.params.tab){case"settings":return this.renderSettings();case"bridge":return this.renderBridgeInfo();case"about":return this.renderAbout();default:return a.a.createElement(De.a,{to:"/settings/settings"})}},t.prototype.renderAbout=function(){var e,t,n,r,o,i,l=this.props.bridgeInfo,c=null===(null===(e=l.version)||void 0===e?void 0:e.match(/^\d+\.\d+\.\d+$/))?l.version:a.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/Koenkk/zigbee2mqtt/releases/tag/"+l.version},l.version),s=l.commit?a.a.createElement(a.a.Fragment,null,"commit: ",a.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/Koenkk/zigbee2mqtt/commit/"+l.commit},l.commit)):null;return a.a.createElement(a.a.Fragment,null,a.a.createElement("dl",{className:"row"},a.a.createElement("dt",{className:"col-sm-3"},"zigbee2mqtt version"),a.a.createElement("dd",{className:"col-sm-9"},c," ",s)),a.a.createElement("dl",{className:"row"},a.a.createElement("dt",{className:"col-sm-3"},"coordinator type"),a.a.createElement("dd",{className:"col-sm-9"},null!==(n=null===(t=l.coordinator)||void 0===t?void 0:t.type)&&void 0!==n?n:"Unknown")),a.a.createElement("dl",{className:"row"},a.a.createElement("dt",{className:"col-sm-3"},"coordinator revision"),a.a.createElement("dd",{className:"col-sm-9"},null!==(i=null===(o=null===(r=l.coordinator)||void 0===r?void 0:r.meta)||void 0===o?void 0:o.revision)&&void 0!==i?i:"Unknown")),a.a.createElement("dl",{className:"row"},a.a.createElement("dt",{className:"col-sm-3"},"frontend version"),a.a.createElement("dd",{className:"col-sm-9"},"0.2.120")))},t.prototype.renderBridgeInfo=function(){var e=this.props.bridgeInfo;return a.a.createElement("pre",null,JSON.stringify(e,null,4))},t.prototype.renderLegacyApiSettings=function(){var e=this.props.resetZnp;return[a.a.createElement("div",{key:"znp-rest",className:"row"},a.a.createElement("div",{className:"col"},a.a.createElement(se,{className:"btn btn-danger",promt:!0,onClick:function(){return e()}},"Reset coordinator")))]},t.prototype.renderSettings=function(){var e,t=this,n=this.props,r=n.bridgeInfo,o=n.exportState;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"mt-2"},!hr()(r)&&gr.map((function(e){return a.a.createElement("div",{key:e.key,className:"row"},a.a.createElement("div",{className:"col"},a.a.createElement("label",{htmlFor:e.key},e.title),a.a.createElement(fr,{disabled:void 0===Ke()(r,e.path),value:Ke()(r,e.path),values:e.values,onChange:function(n){return t.updateConfig(e.key,n)}}),a.a.createElement("div",{className:"form-text"},e.description)))})),!1!==(null===(e=r.config)||void 0===e?void 0:e.advanced.legacy_api)?this.renderLegacyApiSettings():null),a.a.createElement(se,{className:"mt-2 btn btn-primary",onClick:o},"Download state"))},t}(r.Component),Er=Object(De.g)(br),Or=Object(U.connect)(["bridgeInfo"],oe)(Er);var _r="_36Sntvyj-B3gg7Xj6xLUaY";var kr=[{href:"/",title:"Devices",exact:!0},{href:"/map",title:"Map"},{href:"/settings",title:"Settings"},{href:"/groups",title:"Groups"},{href:"/touchlink",title:"Touchlink"},{href:"/logs",title:"Logs"}],Nr=function(e){var t,n=e.devices,o=e.setPermitJoin,i=e.bridgeInfo,c=function(e){var t=Object(r.useState)(e),n=t[0],a=t[1],o=Object(r.useRef)(null),i=function(e){"Escape"===e.key&&a(!1)},l=function(e){o.current&&!o.current.contains(e.target)&&a(!1)};return Object(r.useEffect)((function(){return document.addEventListener("keydown",i,!0),document.addEventListener("click",l,!0),function(){document.removeEventListener("keydown",i,!0),document.removeEventListener("click",l,!0)}})),{ref:o,isComponentVisible:n,setIsComponentVisible:a}}(!1),s=c.ref,u=c.isComponentVisible,p=c.setIsComponentVisible,m=Object(r.useState)(null),d=m[0],f=m[1],v=[],h=function(e){f(e),p(!1)};n.forEach((function(e){"Router"==e.type&&v.push(a.a.createElement("li",{key:e.friendly_name},a.a.createElement(se,{item:e,className:"dropdown-item",onClick:h},e.friendly_name)))}));return a.a.createElement("div",{className:"input-group w-auto"},a.a.createElement("button",{onClick:function(){o(!i.permit_join,d)},type:"button",className:"btn btn-outline-secondary"},i.permit_join?"Disable join":"Permit join"," (",null!==(t=null==d?void 0:d.friendly_name)&&void 0!==t?t:"All",")"),v.length?a.a.createElement(a.a.Fragment,null,a.a.createElement(se,{type:"button",onClick:p,item:!u,className:"btn btn-outline-secondary dropdown-toggle dropdown-toggle-split","data-toggle":"dropdown","aria-expanded":"false"},a.a.createElement("span",{className:"visually-hidden"},"Toggle Dropdown")),a.a.createElement("ul",{ref:s,className:l()("dropdown-menu",_r,{show:u})},a.a.createElement("li",{key:"all"},a.a.createElement(se,{item:null,className:"dropdown-item",onClick:h},"All")),v)):null)},wr=Object(U.connect)(["bridgeInfo","devices"],oe)((function(e){var t=e.devices,n=e.setPermitJoin,o=e.bridgeInfo,i=Object(r.useRef)(),c=Object(r.useState)(!1),s=c[0],u=c[1];return function(e,t){Object(r.useEffect)((function(){var n=function(n){e.current&&!e.current.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}(i,(function(){u(!1)})),a.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark fixed-top"},a.a.createElement("div",{ref:i,className:"container-fluid"},a.a.createElement(Ie.b,{onClick:function(){return u(!1)},className:"navbar-brand",to:"/"},"Zigbee2MQTT"),a.a.createElement("button",{onClick:function(){console.log("click"),u(!s)},className:"navbar-toggler",type:"button"},a.a.createElement("span",{className:"navbar-toggler-icon"})),a.a.createElement("div",{className:l()("navbar-collapse collapse",{show:s})},a.a.createElement("ul",{className:"navbar-nav mb-2 mb-md-0"},kr.map((function(e){return a.a.createElement("li",{key:e.href,className:"nav-item"},a.a.createElement(Ie.c,{onClick:function(){return u(!1)},exact:e.exact,className:"nav-link",to:e.href,activeClassName:"active"},e.title))}))),a.a.createElement(Nr,{devices:t,setPermitJoin:n,bridgeInfo:o}))))})),Cr="_2p1XqBiO9XLlCB-lT60VCH",jr="_3Z1i8qUrV2sErNF0__pVZt",Sr=function(){return(Sr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function Pr(e){var t=e.name,n=e.onRename,o=Object(r.useState)(!1),i=o[0],l=o[1],c=function(e){var t=Object(r.useState)(e),n=t[0],a=t[1];return[n,function(e){var t;return a(Sr(Sr({},n),((t={})[e.currentTarget.name]=e.currentTarget.value,t)))}]}({friendlyName:t}),s=c[0],u=c[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ge,{isOpen:i},a.a.createElement(Te,null,a.a.createElement("h3",null,"Rename group"),a.a.createElement("small",null,t)),a.a.createElement(Le,null,a.a.createElement("div",{className:"mb-3"},a.a.createElement("label",{className:"form-label"},"Friendly name"),a.a.createElement("input",{name:"friendlyName",onChange:u,type:"text",className:"form-control",value:s.friendlyName}))),a.a.createElement(Fe,null,a.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(){return l(!1)}},"Close"),a.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){n(t,s.friendlyName),l(!1)}},"Save changes"))),a.a.createElement(se,{className:"btn btn-secondary",onClick:function(){return l(!0)},title:"Rename group"},a.a.createElement("i",{className:"fa fa-edit"})))}var xr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ar=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xr(t,e),t.prototype.getDeviceObj=function(){var e=this.props,t=e.groupAddress;return e.devices.get(t.ieee_address)},t.prototype.render=function(){var e=this.props,t=e.rowNumber,n=e.groupAddress,r=e.removeDeviceFromGroup,o=this.getDeviceObj();return a.a.createElement("tr",null,a.a.createElement("th",{scope:"row"},t+1),a.a.createElement("td",{className:Cr},a.a.createElement(R,{className:l()(jr),device:o})),a.a.createElement("td",null,a.a.createElement(Ie.b,{to:y(o.ieee_address)},o.friendly_name)),a.a.createElement("td",null,n.ieee_address),a.a.createElement("td",null,n.endpoint),a.a.createElement("td",null,o&&a.a.createElement(se,{promt:!0,item:o.friendly_name,onClick:r,className:"btn btn-danger btn-sm float-right"},a.a.createElement("i",{className:"fa fa-trash"}))))},t}(r.Component),Rr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onRemove=function(e){var n=t.props,r=n.group;(0,n.removeDeviceFromGroup)(r.friendly_name,e)},t}return xr(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.group,r=t.devices;return a.a.createElement("table",{className:"table table-sm"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{scope:"col"},"#"),a.a.createElement("th",{scope:"col"},"Pic"),a.a.createElement("th",{scope:"col"},"friendlyName"),a.a.createElement("th",{scope:"col"},"ieee_addr"),a.a.createElement("th",{scope:"col"},"Endpoint"),a.a.createElement("th",{scope:"col",className:"text-right"},"Action"))),a.a.createElement("tbody",null,n.members.map((function(t,n){return a.a.createElement(Ar,{key:t.ieee_address,removeDeviceFromGroup:e.onRemove,rowNumber:n,devices:r,groupAddress:t})}))))},t}(r.Component),Ir=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={device:void 0,endpoint:void 0},t.onSubmit=function(){var e=t.props,n=e.addDeviceToGroup,r=e.group,a=t.state,o=a.device,i=a.endpoint;n(i?o+"/"+i:o,r.friendly_name)},t.onDeviceSelect=function(e){var n=C(e);t.setState({device:e.ieee_address,endpoint:n[0]})},t.onEpChange=function(e){t.setState({endpoint:e})},t}return xr(t,e),t.prototype.render=function(){var e=this.state,t=e.device,n=e.endpoint,r=this.props.devices,o=r.get(t),i=C(o);return a.a.createElement("form",{className:"row"},a.a.createElement("div",{className:"col"},a.a.createElement("div",{className:"input-group mb-3"},a.a.createElement(ut,{type:"device",value:t,devices:r,onChange:this.onDeviceSelect}),a.a.createElement(ft,{values:i,value:n,onChange:this.onEpChange}))),a.a.createElement("div",{className:"col"},a.a.createElement(se,{type:"button",onClick:this.onSubmit,className:"btn btn-primary"},"Add to group")))},t}(r.Component),Dr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={newGroupName:"",newGroupId:void 0},t.changeHandler=function(e){var n,r=e.target,a=r.name,o=r.value;t.setState(((n={})[a]=o,n))},t.onGroupCreateSubmit=function(){var e=t.state,n=e.newGroupName,r=e.newGroupId;(0,t.props.createGroup)(n,r)},t.removeGroup=function(e){(0,t.props.removeGroup)(e)},t.removeDeviceFromGroup=function(e,n){(0,t.props.removeDeviceFromGroup)(n,e)},t.renameGroup=function(e,n){(0,t.props.renameGroup)(e,n)},t}return xr(t,e),t.prototype.renderGroupCreationForm=function(){var e=this.state,t=e.newGroupName,n=e.newGroupId;return a.a.createElement("form",{className:"row mt-2"},a.a.createElement("div",{className:"input-group  mb-2"},a.a.createElement("label",{htmlFor:"newGroupName",className:"sr-only"},"Group name"),a.a.createElement("input",{onChange:this.changeHandler,value:t,required:!0,type:"text",name:"newGroupName",className:"form-control",id:"newGroupName",placeholder:"new group name"}),a.a.createElement("label",{htmlFor:"newGroupName",className:"sr-only"},"Group id"),a.a.createElement("input",{onChange:this.changeHandler,value:void 0===n?"":n,type:"number",name:"newGroupId",className:"form-control",id:"newGroupId",placeholder:"enter group id if necessary"}),a.a.createElement(se,{onClick:this.onGroupCreateSubmit,className:"btn btn-primary form-control"},"Create group")))},t.prototype.renderGroups=function(){var e=this,t=this.props,n=t.groups,r=t.devices,o=t.addDeviceToGroup;return a.a.createElement("div",{id:"accordion"},n.map((function(t){return a.a.createElement("div",{key:t.id,className:"card mb-1"},a.a.createElement("div",{className:"card-header",id:"heading"+t.id},a.a.createElement("h5",{className:"mb-0"},a.a.createElement("button",{className:"btn btn-link btn-sm"},t.friendly_name," (#",t.id,")"),a.a.createElement("div",{className:"btn-group float-right btn-group-sm",role:"group","aria-label":"Basic example"},a.a.createElement(se,{promt:!0,title:"Remove group",item:t.friendly_name,onClick:e.removeGroup,className:"btn btn-danger"},a.a.createElement("i",{className:"fa fa-trash"})),a.a.createElement(Pr,{name:t.friendly_name,onRename:e.renameGroup})))),a.a.createElement("div",null,a.a.createElement("div",{className:"card-body"},a.a.createElement("div",{className:"table-responsive"},a.a.createElement(Rr,{group:t,devices:r,removeDeviceFromGroup:e.removeDeviceFromGroup})))),a.a.createElement("div",{className:"card-footer"},a.a.createElement(Ir,{addDeviceToGroup:o,devices:r,group:t})))})).reverse())},t.prototype.render=function(){return a.a.createElement("div",{className:"container"},this.renderGroupCreationForm(),this.renderGroups())},t}(r.Component),Mr=Object(U.connect)(["groups","devices"],oe)(Dr),Tr="_1AmFhCTIk_ifBlEJGnLJuK",Lr="_1KD_wxLENsmTnroATY4BrA",Fr="_1kMXLbhsSotmS-uYUbIFl0",Gr=n("Y+p1"),Br=n.n(Gr),Ur=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qr=function(){return(qr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Jr=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Vr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(e){e.preventDefault(),e.stopPropagation();var n=t.props,r=n.column,a=n.onClick;a&&a(r)},t}return Ur(t,e),t.prototype.renderArrow=function(){var e=this.props,t=e.currentDirection,n=e.current,r=e.column;return Br()(n,r)?"asc"==t?a.a.createElement("i",{className:"fa fa-sort-amount-down-alt"}):a.a.createElement("i",{className:"fa fa-sort-amount-down"}):a.a.createElement("i",{className:"fa fa-sort-amount-down invisible"})},t.prototype.render=function(){var e=this.props,t=e.children,n=(e.onClick,e.current,e.column,e.currentDirection,Jr(e,["children","onClick","current","column","currentDirection"]));return a.a.createElement("th",qr({},n),a.a.createElement("span",{className:"btn btn-link",onClick:this.onClick},t),this.renderArrow())},t}(a.a.Component),Hr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wr=function(e){function t(t){var n=e.call(this,t)||this;return n.saveState=function(){var e=n.state,t={sortDirection:e.sortDirection,sortColumn:e.sortColumn};try{localStorage.setItem("ZigbeeTableState",JSON.stringify(t))}catch(e){(new H.a).error(e.toString())}},n.handleLongLoading=function(){if(0==n.props.devices.size){var e=a.a.createElement(r.Fragment,null,a.a.createElement("strong",null,"Loading devices takes too long time."),a.a.createElement("div",null,"Consider reading ",a.a.createElement("a",{href:"https://www.zigbee2mqtt.io/information/frontend.html"},"documentation")));n.setState({error:e})}},n.onSortChange=function(e,t){void 0===t&&(t=void 0);var r=n.state.sortColumn,a=n.state.sortDirection;Br()(r,e)&&(a=t||("asc"==a?"desc":"asc")),n.setState({sortColumn:e,sortDirection:a},n.saveState)},n.state={sortDirection:"desc",sortColumn:"device.network_address",currentTime:Date.now(),sortedTableData:[]},n}return Hr(t,e),t.prototype.restoreState=function(){var e=this.state,t=e.sortColumn,n=e.sortDirection,r=localStorage.getItem("ZigbeeTableState");if(r)try{var a=JSON.parse(r);this.setState(a)}catch(e){(new H.a).error(e.toString())}else this.onSortChange(t,n)},t.prototype.componentDidMount=function(){setTimeout(this.handleLongLoading,15e3),this.restoreState()},t.getDerivedStateFromProps=function(e,t){var n=t.sortColumn,r=t.sortDirection,a=e.devices,o=e.deviceStates,i=[];return a.forEach((function(e){"Coordinator"!==e.type&&i.push({device:e,state:o.get(e.friendly_name)})})),{sortedTableData:z()(i,n,[r])}},t.prototype.renderError=function(){var e=this.state.error;return a.a.createElement("div",{className:"h-100 d-flex justify-content-center align-items-center"},a.a.createElement("div",{className:"d-flex align-items-center"},e))},t.prototype.render=function(){var e=this.state.error;return this.props.devices.size?this.renderDevicesTable():e?this.renderError():a.a.createElement("div",{className:"h-100 d-flex justify-content-center align-items-center"},a.a.createElement(be,null))},t.prototype.lastSeenIsAvaliable=function(){var e,t,n,r,a=this.props.bridgeInfo;return(null===(t=null===(e=null==a?void 0:a.config)||void 0===e?void 0:e.advanced)||void 0===t?void 0:t.elapsed)||"disable"!=(null===(r=null===(n=null==a?void 0:a.config)||void 0===n?void 0:n.advanced)||void 0===r?void 0:r.last_seen)},t.prototype.renderDevicesTableHeader=function(){var e=this.state,t=e.sortColumn,n=e.sortDirection,r=this.onSortChange;return a.a.createElement("thead",null,a.a.createElement("tr",{className:"text-nowrap"},a.a.createElement("th",null,"#"),a.a.createElement("th",null,"Pic"),a.a.createElement(Vr,{className:Tr,column:"device.friendly_name",currentDirection:n,current:t,onClick:r},"Friendly name"),a.a.createElement(Vr,{className:Tr,column:"device.ieee_address",currentDirection:n,current:t,onClick:r},"IEEE address"),a.a.createElement(Vr,{className:Tr,column:"device.definition.vendor",currentDirection:n,current:t,onClick:r,title:"definition.vendor"},"Manufacturer"),a.a.createElement(Vr,{className:Tr,column:"device.definition.model",currentDirection:n,current:t,onClick:r},"Model"),a.a.createElement(Vr,{className:Tr,column:"state.linkquality",currentDirection:n,current:t,onClick:r},"LQI"),this.lastSeenIsAvaliable()&&a.a.createElement(Vr,{className:Tr,column:["state.last_seen","state.elapsed"],currentDirection:n,current:t,onClick:r},"Last seen"),a.a.createElement(Vr,{className:Tr,column:"state.battery",currentDirection:n,current:t,onClick:r},"Power"),a.a.createElement("th",null," ")))},t.prototype.renderDevicesTable=function(){var e=this,t=this.state.sortedTableData;return a.a.createElement("div",{className:"row no-gutters table-responsive"},a.a.createElement("table",{className:"table align-middle col-12"},this.renderDevicesTableHeader(),a.a.createElement("tbody",null,t.map((function(t,n){var r,o,i,l,c,s,u=t.device,p=t.state;return a.a.createElement("tr",{key:u.friendly_name,title:"available"==(null===(r=null==p?void 0:p.update)||void 0===r?void 0:r.state)?"Avaliable OTA update":null===(o=u.definition)||void 0===o?void 0:o.description},a.a.createElement("td",{className:"font-weight-bold"},n+1),a.a.createElement("td",{className:Lr},a.a.createElement(R,{className:Fr,device:u,deviceStatus:p})),a.a.createElement("td",null,a.a.createElement(Ie.b,{to:y(u.ieee_address)},u.friendly_name)),a.a.createElement("td",null,u.ieee_address," (",g(u.network_address,4),")"),a.a.createElement("td",{className:"text-truncate text-nowrap position-relative"},a.a.createElement(Qe,{device:u})),a.a.createElement("td",{title:null===(i=null==u?void 0:u.definition)||void 0===i?void 0:i.description},a.a.createElement(Ye,{device:u})),a.a.createElement("td",null,a.a.createElement(sn,{value:null==p?void 0:p.linkquality})),e.lastSeenIsAvaliable()&&a.a.createElement("td",null,(l=null==p?void 0:p.last_seen,c=null==p?void 0:p.elapsed,l||c?(s=void 0!==c?Date.now()-c:"string"==typeof l?Date.parse(l):new Date(l),Object(v.a)(s)):"N/A")),a.a.createElement("td",{className:"text-left"},a.a.createElement(nt,{source:u.power_source,battery:null==p?void 0:p.battery,batteryLow:null==p?void 0:p.battery_low})),a.a.createElement("td",null,a.a.createElement(Ve,{device:u,state:p})))})))))},t}(r.Component),zr=Object(U.connect)(["devices","deviceStates","bridgeInfo"],oe)(Wr),Kr=n("kGJw"),Zr=n.n(Kr),Qr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yr=function(e){var t=e.text,n=void 0===t?"":t,r=e.highlight,o=void 0===r?"":r;if(!o.trim())return a.a.createElement("span",null,n);var i=new RegExp("("+Zr()(o)+")","gi"),l=n.split(i);return a.a.createElement("span",null,l.filter((function(e){return e})).map((function(e,t){return i.test(e)?a.a.createElement("mark",{key:t},e):a.a.createElement("span",{key:t},e)})))},Xr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={search:"",logLevel:"ALL"},t}return Qr(t,e),t.prototype.renderSearch=function(){var e=this,t=this.state.search,n=this.props.logs,r=Array.from(new Set(n.map((function(e){return e.level}))));return r.unshift("ALL"),a.a.createElement("form",{className:"row row-cols-lg-auto g-3 align-items-center"},a.a.createElement("div",{className:"col-12"},a.a.createElement("select",{className:"form-select",onChange:function(t){return e.setState({logLevel:t.target.value})}},r.map((function(e){return a.a.createElement("option",{key:e,value:e},e.toUpperCase())})))),a.a.createElement("div",{className:"col-12"},a.a.createElement("input",{className:"form-control col-10",placeholder:"Enter search criteria",value:t,onChange:function(t){return e.setState({search:t.target.value})},type:"text"})))},t.prototype.render=function(){var e=this.props.logs,t=this.state,n=t.search,r=t.logLevel,o=new RegExp(n,"gi");return e=e.filter((function(e){return("ALL"===r||e.level===r)&&(!n||o.test(e.message))})),a.a.createElement("div",{className:"container-fluid h-100 overflow-auto pt-2"},this.renderSearch(),e.map((function(e,t){return a.a.createElement("div",{key:t},a.a.createElement("span",{className:l()({"text-danger":"error"===e.level,"text-warning":"warning"===e.level,"text-info":"info"===e.level,"d-none":"ALL"!==r})},e.level.toUpperCase(),": "),a.a.createElement("code",null,a.a.createElement(Yr,{text:e.message,highlight:n})))})))},t}(r.Component),$r=Object(U.connect)(["logs"],oe)(Xr),ea=n("i8i4"),ta=n.n(ea),na=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ra=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.donwloadState=function(){w(V.getState(),"state.json")},t}return na(t,e),t.getDerivedStateFromError=function(e){return{hasError:!0,error:e}},t.prototype.render=function(){var e=this,t=this.state.error;return t?a.a.createElement("div",{className:"container"},a.a.createElement("h1",{className:"text-danger"},"Take screenshot of this page and attach it to github issue, additionally ",a.a.createElement(se,{className:"mt-2 btn btn-link",onClick:function(){return e.donwloadState()}},"download state")," and attach to the issue"),a.a.createElement("h2",null,t.name),a.a.createElement("h3",null,t.message),a.a.createElement("pre",null,t.stack)):this.props.children},t.prototype.componentDidUpdate=function(e){var t=this.props.location.pathname;e.location.pathname!==t&&this.setState({error:null})},t}(a.a.Component),aa=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),oa=function(){return(oa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};re.connect();var ia=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return aa(t,e),t.prototype.render=function(){return a.a.createElement(U.Provider,{store:V},a.a.createElement(Ie.a,null,a.a.createElement(wr,null),a.a.createElement(De.d,null,a.a.createElement(De.b,{path:"/map",render:function(e){return a.a.createElement(ra,oa({},e),a.a.createElement(Re,null))}}),a.a.createElement(De.b,{path:"/device/:dev/:tab?",render:function(e){return a.a.createElement(ra,oa({},e),a.a.createElement(ir,null))}}),a.a.createElement(De.b,{path:"/settings/:tab?",render:function(e){return a.a.createElement(ra,oa({},e),a.a.createElement(Or,null))}}),a.a.createElement(De.b,{path:"/groups",render:function(e){return a.a.createElement(ra,oa({},e),a.a.createElement(Mr,null))}}),a.a.createElement(De.b,{path:"/logs",render:function(e){return a.a.createElement(ra,oa({},e),a.a.createElement($r,null))}}),a.a.createElement(De.b,{path:"/touchlink",render:function(e){return a.a.createElement(ra,oa({},e),a.a.createElement(sr,null))}}),a.a.createElement(De.b,{path:"/",render:function(e){return a.a.createElement(ra,oa({},e),a.a.createElement(zr,null))}}))))},t}(r.Component);ta.a.render(a.a.createElement(ia,null),document.getElementById("root"))},3:function(e,t){},4:function(e,t){},5:function(e,t){},6:function(e,t){},7:function(e,t){},8:function(e,t){},9:function(e,t){}},[["2YZa",1,2]]]);
//# sourceMappingURL=main.d0a76d599ff3ca0ae5f6.js.map